---
title: 微服務
date: 2022-05-21 16:21:48
tags:
categories:
---

# 前言

微服務的實作無關語言，能做到服務發現、服務註冊，基本是任何語言都可以勝任的，那php的弱勢在於，請求都是一個新的請求，要透過nginx和php-fpm做調用，每次都要重頭跑一次是非常致命的，後來有了swoole便可以克服效能這件事，但既然有了go，我為什麼還要再去學swoole??
微服务重构的一大目的是为了提高系统并发和性能，所以有关高性能、高并发、同步 IO 操作都应该通过后端微服务去实现
数据库也都是独立的，这样可以保证数据库性能的同时，也能避免某个服务数据库挂掉不影响其它的服务正常使用，提高了系统的可用性

# 框架

基本的 RPC 远程服务调用、注册中心、服务发现、负载均衡、API 网关、异步消息队列、多种通信协议和数据序列化

# 拆分服務

幾乎現在所有大型的電商，社群網站都是從單體架構開始的，學會拆分服務便成為服務的重要技能
單體架構要面對的就是商業邏輯壯大，主機效能的問題
## 注意事項
- 多微才叫微，過分拆分粒度，服務太多會造成服務間的邏輯交錯複雜，例如大家都會動用到會員系統
- 網路響應問題，本來是本機的調用變成要透過網路來呼叫，有可能變更慢
- 管理上會不會過於雜亂，自動化CICD和監控等等

## 服務拆分原則
開發時期:亞馬遜的2個PIZZA理論，一個團隊大致3個人最剛好，不能兩個PIZZA不夠吃，一個服務的邏輯也是大家都能掌握的
維護時期:1人即可

## DB的垂直拆分

##


