<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"dkchange.github.io","root":"/","scheme":"Muse","version":"8.0.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜尋...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="蛋粒個人網誌">
<meta property="og:url" content="http:&#x2F;&#x2F;dkchange.github.io&#x2F;page&#x2F;6&#x2F;index.html">
<meta property="og:site_name" content="蛋粒個人網誌">
<meta property="og:locale" content="zh-TW">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://dkchange.github.io/page/6/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-TW'
  };
</script>

  <title>蛋粒個人網誌</title>
  






  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">蛋粒個人網誌</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          本站概要
        </li>
      </ul>

      <!--noindex-->
      <section class="post-toc-wrap sidebar-panel">
      </section>
      <!--/noindex-->

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Stanley Ke</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">78</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">35</span>
        <span class="site-state-item-name">分類</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">44</span>
        <span class="site-state-item-name">標籤</span></a>
      </div>
  </nav>
</div>



      </section>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">
      

      
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://dkchange.github.io/2020/01/24/laravel%E4%BD%BF%E7%94%A8Socialite/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Stanley Ke">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蛋粒個人網誌">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/24/laravel%E4%BD%BF%E7%94%A8Socialite/" class="post-title-link" itemprop="url">laravel使用Socialite</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2020-01-24 21:07:04" itemprop="dateCreated datePublished" datetime="2020-01-24T21:07:04+08:00">2020-01-24</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新於</span>
        <time title="修改時間：2021-07-30 18:15:09" itemprop="dateModified" datetime="2021-07-30T18:15:09+08:00">2021-07-30</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%8C%E7%AB%AF%E8%B7%AF%E7%B7%9A/" itemprop="url" rel="index"><span itemprop="name">後端路線</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%8C%E7%AB%AF%E8%B7%AF%E7%B7%9A/framework/" itemprop="url" rel="index"><span itemprop="name">framework</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%8C%E7%AB%AF%E8%B7%AF%E7%B7%9A/framework/laravel/" itemprop="url" rel="index"><span itemprop="name">laravel</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><pre><code>因為你如果不用第三方登入，沒有人要輸入帳密給新網站，會有安全疑慮</code></pre><h1 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h1><p>以github為例，如果你申請時填的是localhost， 記得本機上就不要用127.0.0.1來登入了，要不然會</p>
<p><a href="https://stackoverflow.com/questions/30660847/laravel-socialite-invalidstateexception" target="_blank" rel="noopener">Laravel Socialite: InvalidStateException</a><br>![github申請oAuth畫面]](/images/github申請oAuth畫面.PNG)</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://dkchange.github.io/2020/01/20/%E4%BD%BF%E7%94%A8Drone/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Stanley Ke">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蛋粒個人網誌">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/20/%E4%BD%BF%E7%94%A8Drone/" class="post-title-link" itemprop="url">使用Drone</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2020-01-20 14:11:20" itemprop="dateCreated datePublished" datetime="2020-01-20T14:11:20+08:00">2020-01-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新於</span>
        <time title="修改時間：2021-07-30 18:11:28" itemprop="dateModified" datetime="2021-07-30T18:11:28+08:00">2021-07-30</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/DevOps%E8%B7%AF%E7%B7%9A/" itemprop="url" rel="index"><span itemprop="name">DevOps路線</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/DevOps%E8%B7%AF%E7%B7%9A/CI-CD%E5%B7%A5%E5%85%B7/" itemprop="url" rel="index"><span itemprop="name">CI/CD工具</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/DevOps%E8%B7%AF%E7%B7%9A/CI-CD%E5%B7%A5%E5%85%B7/Drone/" itemprop="url" rel="index"><span itemprop="name">Drone</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>對於現代化的開發來說，你想要達到的自動化是什麼？最好是我 code 提交上去之後，一切都成功的佈署好，中間的過程有<br>代碼提交<br>代碼測試<br>代碼審核<br>代碼合併<br>代碼佈署<br>環境建制<br>代碼編譯</p>
<p>那這中間的過程，如果沒有導入 ci\cd 我們原本是怎麼做的？<br>git 提交<br>ftp 手動上傳 10 台？<br>代碼測試<br>每一台環境手動重新安裝？<br>在不同環境下不同指令編譯<br>寫許多腳本來環境安裝</p>
<p>太多名詞在網路上飛， 基於<strong>沒用過至少也要聽過</strong>，為了跟得上時代，有些東西還是免不了，這篇整理自<br><a href="https://ithelp.ithome.com.tw/users/20120491/ironman/2538" target="_blank" rel="noopener">就是「懶」才更需要重視 DevOps</a><br><a href="https://ithelp.ithome.com.tw/users/20107551/ironman/1906" target="_blank" rel="noopener">從零開始建立自動化發佈的流水線</a><br><a href="https://medium.com/asiayo-engineering/%E7%94%A8-drone-%E6%89%93%E9%80%A0-ci-cd-flow-36b9d14c7620" target="_blank" rel="noopener">用 Drone 打造 CI/CD flow</a><br>的讀後感心得，特別推 <strong>從零開始建立自動化發佈的流水線</strong></p>
<h1 id="play-with-docker"><a href="#play-with-docker" class="headerlink" title="play with docker"></a>play with docker</h1><p><a href="https://labs.play-with-docker.com/" target="_blank" rel="noopener">https://labs.play-with-docker.com/</a><br>可以免費玩 docker 4hr 的服務</p>
<h1 id="何謂-DevOps"><a href="#何謂-DevOps" class="headerlink" title="何謂 DevOps"></a>何謂 DevOps</h1><p><strong>開發</strong> 與 <strong>維運</strong> 融會貫通後的一種技術能力體現<br>只是，時間終究有限，需要 「自動化」 協助「DevOps」人員<br>是現代敏捷開發所秉持的精神</p>
<h1 id="版本控制系統-Version-Control-System-VCS"><a href="#版本控制系統-Version-Control-System-VCS" class="headerlink" title="版本控制系統( Version Control System, VCS)"></a>版本控制系統( Version Control System, VCS)</h1><p>大致上分為兩種類型，集中式與分散式<br>代表案例：<br>Subversion 就是集中式版本控制系統<br><strong>Git</strong>、Mercurial 則是分散式版本控制系統。</p>
<p>品牌認識:GitHub、BitBucket、Azure DevOps、GitLab</p>
<h1 id="git-開發流程（工作流程）"><a href="#git-開發流程（工作流程）" class="headerlink" title="git 開發流程（工作流程）"></a>git 開發流程（工作流程）</h1><p>團隊合作如何避免衝突、覆蓋，分支如何合併等等的工作流程。<br>團隊間可以自行協調出工作流程或是根據知名的規範走<br>規範認識:git flow、Github flow、Gitlab flow</p>
<h1 id="何謂-CI-CD"><a href="#何謂-CI-CD" class="headerlink" title="何謂 CI/CD"></a>何謂 CI/CD</h1><p>CI(Continuous integration)，持續整合，利用頻繁地<strong>提交</strong>新功能的變更，觸發自動化建置和測試<br>CD(Continuous Deployment)，持續佈署，快速而自動的<strong>部署</strong>，任何版本的軟體到不同的環境<br>CD(Continuous Delivery)，持續交付，儘快將最新版本的軟體，交付到最終使用者(end-user)手中</p>
<h2 id="CI-server"><a href="#CI-server" class="headerlink" title="CI server"></a>CI server</h2><p>可以自己架，或者使用線上平台提供架好的 CI 應用程式，這可以用來整合其他應用<br>知名品牌:Drone ,Jenkins, travisCI ,GitLab CI, CircleCI ,github action<br>以 drone 為例，其流程大致為：<br>clone git repo<br>run linter<br>run unit test<br>prepare bulid<br>publish docker<br>deploy<br>nofity</p>
<p>github ations <a href="https://www.youtube.com/watch?v=kuRhHaumEtE" target="_blank" rel="noopener">https://www.youtube.com/watch?v=kuRhHaumEtE</a></p>
<h2 id="自動訊息通知"><a href="#自動訊息通知" class="headerlink" title="自動訊息通知"></a>自動訊息通知</h2><p>CI server 發 mail 或與現有的知名通訊軟體做整合，或寫 API</p>
<h2 id="自動單元測試"><a href="#自動單元測試" class="headerlink" title="自動單元測試"></a>自動單元測試</h2><p>被測試的物件，商業邏輯的是否正確、輸出入的結果是否符合預期<br>單元測試的運用與觀念，非常重視 物件導向的特性 與 SOLID 原則。所以，假若不常用或不熟悉物件導向的開發者，初期不容易切入單元測試的世界。<br>單元測試，真正發揮它的 POWER 的時間點，在於軟體後續長期維護、需求變動、重構時，才能真正的明白為什麼需要單元測試。<br>自己寫腳本</p>
<h2 id="自動部屬"><a href="#自動部屬" class="headerlink" title="自動部屬"></a>自動部屬</h2><p>自己寫腳本與現有的知名雲端平台做整合</p>
<h2 id="部屬完的環境設定"><a href="#部屬完的環境設定" class="headerlink" title="部屬完的環境設定"></a>部屬完的環境設定</h2><p>如果每次部屬一台機器就要設定一次是很煩的事，服<br>所以就有了容器這項技術<br>直接針對 應用程式層下手，將 應用程式本身與相關的函式庫、環境配置檔，打包成映像檔 (Image)<br>知名專案:Docker</p>
<h2 id="容器的集群管理平台"><a href="#容器的集群管理平台" class="headerlink" title="容器的集群管理平台"></a>容器的集群管理平台</h2><p>服務編排的功能<br>可讓您執行 Docker 容器和工作負載，並協助您解決在調整跨多部伺服器部署之多個容器規模時的一些複雜作業<br>知名專案:Mesos,Docker Swarm,K8S</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://dkchange.github.io/2019/12/21/%E5%AE%89%E8%A3%9D%E7%92%B0%E5%A2%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Stanley Ke">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蛋粒個人網誌">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/21/%E5%AE%89%E8%A3%9D%E7%92%B0%E5%A2%83/" class="post-title-link" itemprop="url">安裝環境</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2019-12-21 20:22:50" itemprop="dateCreated datePublished" datetime="2019-12-21T20:22:50+08:00">2019-12-21</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新於</span>
        <time title="修改時間：2021-07-30 18:17:40" itemprop="dateModified" datetime="2021-07-30T18:17:40+08:00">2021-07-30</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>事情是這樣子的，以前從 windows 環境就安裝 AppServ、WampServer、Xampp 這種快速安裝的安裝包，為什麼呢?<br>因為最後環境還是會在 linux 上，所以 windows 上能開發就好，也就不用太講究了，因為有些包在 linux 沒問題，在 windows 會出事，<br>心血來潮試著自己安裝一次看看</p>
<h1 id="名詞解釋"><a href="#名詞解釋" class="headerlink" title="名詞解釋"></a>名詞解釋</h1><ul>
<li><p>X86 X32<br>我們要安裝 PHP 時就會看到一些不懂的名詞<br>x86 等於 32 位元<br>X64 等於 64 位元<br>為何這樣奇怪的命名就是歷史因素了</p>
</li>
<li><p>Thread Safe</p>
</li>
<li><p>None Thread Safe<br>線程安全和非線程安全，這就牽扯到比較複雜的因素了，有時間看看<a href="https://www.awaimai.com/88.html" target="_blank" rel="noopener">https://www.awaimai.com/88.html</a><br>阿因為我們開發機，先不考慮線程安全和效能，任 1 種皆可</p>
</li>
</ul>
<h1 id="php-ini-時區設定的問題"><a href="#php-ini-時區設定的問題" class="headerlink" title="php.ini 時區設定的問題"></a>php.ini 時區設定的問題</h1><p>如果你是跑 php-fpm 那設定在/etc/php.ini 的時區你會吃不到，此時就要跑去<br>/etc/php-fpm.d/<a href="http://www.conf" target="_blank" rel="noopener">www.conf</a> 加上</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php_admin_value[date.timezone] = Europe/Berlin</span><br></pre></td></tr></table></figure>

<h1 id="遭遇問題"><a href="#遭遇問題" class="headerlink" title="遭遇問題"></a>遭遇問題</h1><p>今天打開 Xampp 試著開啟 mysql 服務的時候，程序出錯<br>Error: MySQL shutdown unexpectedly.</p>
<p>打開日誌看不出個什麼鬼，只知道突然中斷<br>日誌都是正常的紀錄<br>然後就開始爬文<br><a href="https://blog.csdn.net/yuer_xiao/article/details/79236719" target="_blank" rel="noopener">https://blog.csdn.net/yuer_xiao/article/details/79236719</a></p>
<pre><code>在mysql/bin/my.ini 文件 加一个：
[mysqld]
innodb_force_recovery = 4</code></pre><p>失敗</p>
<pre><code>把xampp\mysql\data下的ibdata1文件删掉
這有人說這文件很重要，但是我還是試試看</code></pre><p>失敗</p>
<pre><code>用管理员启动命令行，进入mysql的bin目录，输入
mysqld --install，回车
net start mysql ，可以正常启动</code></pre><p>失敗</p>
<pre><code>將ib_logfile0以及ib_logfile1這兩個日誌黨刪除,</code></pre><p>失敗<br>把 xampp/mysql/backup/ 底下所有檔案，複製取代到 xampp/mysql/data/ …<br>成功<br><a href="https://dotblogs.com.tw/mepowerlmay/2019/12/19/085908" target="_blank" rel="noopener">https://dotblogs.com.tw/mepowerlmay/2019/12/19/085908</a></p>
<h1 id="403-forbidden"><a href="#403-forbidden" class="headerlink" title="403 forbidden"></a>403 forbidden</h1><p>除了在 nginx 有設定以外，如果本身資料加權限 84nginx 的進程使用者也會報錯</p>
<h1 id="Noinput-file-specified"><a href="#Noinput-file-specified" class="headerlink" title="Noinput file specified"></a>Noinput file specified</h1><p>找不到檔案，很可能就是 nginx 的正則錯了</p>
<h1 id="XDebug-環境配置"><a href="#XDebug-環境配置" class="headerlink" title="XDebug 環境配置"></a>XDebug 環境配置</h1><p><a href="https://segmentfault.com/a/1190000011907425" target="_blank" rel="noopener">https://segmentfault.com/a/1190000011907425</a></p>
<p>ubutu 安裝 php xdebug<br>sudo apt-get install php-xdebug<br>sudo phpenmod xdebug<br>sudo gedit /etc/php/7.3/mods-available/xdebug.ini<br>重啟 webserver</p>
<p><a href="https://youtu.be/3idASlzGTg4" target="_blank" rel="noopener">Debugging PHP on Linux with Xdebug and PHPStorm</a><br>有三種方式</p>
<ol>
<li>在瀏覽器 url 打上參數</li>
<li>用 phpstorm 網站提供的書籤</li>
<li>安裝 chrome 插件<br><a href="https://stackoverflow.com/questions/46263043/how-to-setup-docker-phpstorm-xdebug-on-ubuntu-16-04" target="_blank" rel="noopener">https://stackoverflow.com/questions/46263043/how-to-setup-docker-phpstorm-xdebug-on-ubuntu-16-04</a><br><a href="https://www.youtube.com/watch?v=mahIIF0c8Zo" target="_blank" rel="noopener">https://www.youtube.com/watch?v=mahIIF0c8Zo</a><br>use ‘xdebug.remote_host=host.docker.internal’ better than hard code IP address.<br>但是 linux 版本要看有沒有支援<br>xdebug.remote_host=docker.for.mac.localhost ，我是这样配置的可以调用成功<br>這個方法也是要看 mac 版本<br>Docker on Linux allows Xdebug to automatically connect back to the host system so you can just set xdebug.remote_connect_back=1 and leave out the xdebug.remote_host in your xdebug.ini.<br>這個方法沒事過</li>
</ol>
<p>linux 不支援 host.docker.internal 可以看這裡<br><a href="https://dev.to/bufferings/access-host-from-a-docker-container-4099" target="_blank" rel="noopener">https://dev.to/bufferings/access-host-from-a-docker-container-4099</a></p>
<h1 id="nginx-设定"><a href="#nginx-设定" class="headerlink" title="nginx 设定"></a>nginx 设定</h1><p><a href="https://blog.51cto.com/13930997/2311716" target="_blank" rel="noopener">https://blog.51cto.com/13930997/2311716</a></p>
<p><a href="https://regex101.com/" target="_blank" rel="noopener">https://regex101.com/</a></p>
<h2 id="domain-name"><a href="#domain-name" class="headerlink" title="domain name"></a>domain name</h2><p>如果你記自己的測試機是以 xxx.localhost 來當 domain 的話，那你的 hosts 的檔就可以不用改了，因為他自己會幫你導向本機</p>
<h2 id="index-php-failed-13-Permission-denied"><a href="#index-php-failed-13-Permission-denied" class="headerlink" title="index.php failed (13: Permission denied)"></a>index.php failed (13: Permission denied)</h2><p>關閉 selinux 即可</p>
<p>setenforce 0</p>
<h1 id="apache-設定"><a href="#apache-設定" class="headerlink" title="apache 設定"></a>apache 設定</h1><h2 id="vhost"><a href="#vhost" class="headerlink" title="vhost"></a>vhost</h2><p>site-available 來設定 vhost<br>site-enabled 是 apache 自己產生的，不要手動去改他</p>
<blockquote>
<p>sudo a2ensite vhost_domain_name<br>site-enabled 就會產生出對應的檔案了</p>
</blockquote>
<h1 id="502-Bad-Gateway"><a href="#502-Bad-Gateway" class="headerlink" title="502 Bad Gateway"></a>502 Bad Gateway</h1><p><a href="https://www.centos.bz/2017/07/nginx-php-fpm-502-error/" target="_blank" rel="noopener">https://www.centos.bz/2017/07/nginx-php-fpm-502-error/</a></p>
<p><a href="https://serverfault.com/questions/457911/nginx-php-fpm-502-bad-gateway" target="_blank" rel="noopener">https://serverfault.com/questions/457911/nginx-php-fpm-502-bad-gateway</a><br>發生這個問題的原因有很多，之前還有可能是 cdn 快取導致頁面一直出現這個錯誤</p>
<h1 id="Apache2-conf-設定檔中文版"><a href="#Apache2-conf-設定檔中文版" class="headerlink" title="Apache2 conf 設定檔中文版"></a>Apache2 conf 設定檔中文版</h1><p><a href="https://sites.google.com/site/linuxcooltea/apache2/a" target="_blank" rel="noopener">https://sites.google.com/site/linuxcooltea/apache2/a</a><br>這篇詳細解釋 conf 內容，對於我們這種非網管人員幫助很大</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://dkchange.github.io/2019/12/20/%E4%BD%BF%E7%94%A8git/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Stanley Ke">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蛋粒個人網誌">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/20/%E4%BD%BF%E7%94%A8git/" class="post-title-link" itemprop="url">使用git</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2019-12-20 12:07:16" itemprop="dateCreated datePublished" datetime="2019-12-20T12:07:16+08:00">2019-12-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新於</span>
        <time title="修改時間：2023-03-18 10:29:13" itemprop="dateModified" datetime="2023-03-18T10:29:13+08:00">2023-03-18</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E4%BB%BB%E4%BD%95%E8%B7%AF%E7%B7%9A/" itemprop="url" rel="index"><span itemprop="name">任何路線</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>版本控制在開發過程占很重要的地位，那團隊裡該如何多人協作?整個專案管理的流程應該要怎樣才不會一天到晚衝突，功能互蓋?<br>參考：為你自己學 git <a href="https://gitbook.tw/" target="_blank" rel="noopener">https://gitbook.tw/</a> 非常推荐，基本上工作需要的东西在<strong>為你自己學 git</strong>都可以找到解答<br><a href="https://zlargon.gitbooks.io/git-tutorial/content/file/ignore.html" target="_blank" rel="noopener">https://zlargon.gitbooks.io/git-tutorial/content/file/ignore.html</a><br><a href="https://zlargon.gitbooks.io/git-tutorial/content/file/recover.html" target="_blank" rel="noopener">https://zlargon.gitbooks.io/git-tutorial/content/file/recover.html</a></p>
<h1 id="約定俗成"><a href="#約定俗成" class="headerlink" title="約定俗成"></a>約定俗成</h1><p>請儘量不要在已經 Push 出去之後再修改提交，否則可能會造成其它人的困擾<br>Git 在計算、產生物件的時候，是根據「檔案的內容」去做計算的，所以光是新增一個目錄，Git 是沒辦法處理它的。慣例上可以放一個名為 “.keep” 或 “.gitkeep” 的空檔案，讓 Git 能「感應」到這個目錄的存在</p>
<p>切好每一次的功能，有空就提交，但前提示提交的 code 都是可以 work 的，獨立且可正常運作的 code</p>
<h1 id="免帳密-ssh-key-登入"><a href="#免帳密-ssh-key-登入" class="headerlink" title="免帳密 ssh key 登入"></a>免帳密 ssh key 登入</h1><p><a href="https://aben20807.blogspot.com/2018/03/1070302-git-push-ssh-key.html" target="_blank" rel="noopener">https://aben20807.blogspot.com/2018/03/1070302-git-push-ssh-key.html</a></p>
<h1 id="git-基本指令"><a href="#git-基本指令" class="headerlink" title="git 基本指令"></a>git 基本指令</h1><h2 id="git-init"><a href="#git-init" class="headerlink" title="git init"></a>git init</h2><h2 id="git-status"><a href="#git-status" class="headerlink" title="git status"></a>git status</h2><h2 id="git-add"><a href="#git-add" class="headerlink" title="git add"></a>git add</h2><p>檔案放到暫存區（Staging Area）</p>
<pre><code>$ git add *.html</code></pre><h2 id="git-commit"><a href="#git-commit" class="headerlink" title="git commit"></a>git commit</h2><p>把暫存區的東西存放到儲存庫（Repository）裡</p>
<h3 id="使用情境"><a href="#使用情境" class="headerlink" title="使用情境"></a>使用情境</h3><p>能增加新 add 到暫存區的檔案，和修改提交訊息，但只能修改前一次的提交<br>$git commit –amend -m “Welcome To Facebook”</p>
<h2 id="git-log"><a href="#git-log" class="headerlink" title="git log"></a>git log</h2><p>只 show 一行資訊和版本路線<br>$ git log –oneline –graph</p>
<h3 id="使用情境-1"><a href="#使用情境-1" class="headerlink" title="使用情境"></a>使用情境</h3><p>找某個人或某些人的 Commit<br><a href="https://gitbook.tw/chapters/using-git/log.html" target="_blank" rel="noopener">https://gitbook.tw/chapters/using-git/log.html</a><br>特定檔案的 Commit 紀錄<br>$ git log welcome.html<br>詳細內容<br>$ git log -p welcome.html</p>
<h2 id="git-rm"><a href="#git-rm" class="headerlink" title="git rm"></a>git rm</h2><p>不需要再自己 add 一次</p>
<h3 id="使用情境-2"><a href="#使用情境-2" class="headerlink" title="使用情境"></a>使用情境</h3><p><a href="https://gitbook.tw/chapters/using-git/rename-and-delete-file.html" target="_blank" rel="noopener">https://gitbook.tw/chapters/using-git/rename-and-delete-file.html</a><br>不是真的想把這個檔案刪掉，只是不想讓這個檔案再被 Git 控管了<br>$ git rm welcome.html –cached</p>
<h2 id="git-mv"><a href="#git-mv" class="headerlink" title="git mv"></a>git mv</h2><p>改檔名，不需要再自己 add 一次<br>$ git mv hello.html world.html</p>
<h2 id="git-rebase"><a href="#git-rebase" class="headerlink" title="git rebase"></a>git rebase</h2><p>修改歷史</p>
<p>怎麼取消 rebase<br>$ git reset ORIG_HEAD –hard</p>
<h3 id="rebase-的好處"><a href="#rebase-的好處" class="headerlink" title="rebase 的好處"></a>rebase 的好處</h3><p><a href="https://youtu.be/JwqDryn8anY" target="_blank" rel="noopener">https://youtu.be/JwqDryn8anY</a><br>rebase 會修改到歷史紀錄，所以不會像 merge 一樣按照順序，但是時間順序對於整個專案相對不是那麼重要，重要的是你修改了什麼，不要跟別人的帶買時間交互重疊，裁讓人好做 code review ，除非你的 merge 只有一個提交</p>
<h2 id="git-reset"><a href="#git-reset" class="headerlink" title="git reset"></a>git reset</h2><p>撤掉 commit<br>分三種情況 –mixed –soft –hard</p>
<h3 id="使用情境-3"><a href="#使用情境-3" class="headerlink" title="使用情境"></a>使用情境</h3><p>不小心使用 hard 模式 Reset 了某個 Commit，救得回來嗎<br>git reflog<br>當 HEAD 有移動的時候，Git 就會在 Reflog 裡記上一筆<br>$ git reset e12d8ef –hard<br>就再 reset 回來一次即可</p>
<h2 id="git-ignore"><a href="#git-ignore" class="headerlink" title="git ignore"></a>git ignore</h2><p>檔案不想讓它進到 Git 裡</p>
<h3 id="使用情境-4"><a href="#使用情境-4" class="headerlink" title="使用情境"></a>使用情境</h3><p>檔案，完全符合被忽略的規則,但沒效果？<br>代表該檔案，在 .gitignore 之前就存在了。.gitignore 檔案設定的規則，只對在規則設定之後的有效<br>$ git rm –cached</p>
<h2 id="git-blame"><a href="#git-blame" class="headerlink" title="git blame"></a>git blame</h2><p>某個檔案的某一行是誰寫的<br>$ git blame index.html</p>
<h2 id="git-checkout"><a href="#git-checkout" class="headerlink" title="git checkout"></a>git checkout</h2><p>取分支<br>取檔案<br>會拿距離現在兩個版本以前的那個 welcome.html 檔案來覆蓋現在的工作目錄裡的 welcome.html 檔案<br>$ git checkout HEAD~2 welcome.html</p>
<h2 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a>git branch</h2><p>分支改名字<br>$ git branch -m cat tiger<br>刪除分支<br>$ git branch -d dog<br>還原刪除的分支<br>$ git branch new_cat b174a5a</p>
<h2 id="git-stash"><a href="#git-stash" class="headerlink" title="git stash"></a>git stash</h2><p>檔案暫存起來<br>$git stash list</p>
<p>$git stash pop</p>
<h2 id="git-cherry-pick"><a href="#git-cherry-pick" class="headerlink" title="git cherry-pick"></a>git cherry-pick</h2><p>撿別的分支的 Commit 過來合併<br>git cherry-pick 6a498ec<br>加上 –no-commit 參數，撿過來的 Commit 不會直接合併，而是會先放在暫存區<br>$ git cherry-pick 6a498ec –no-commit<br>再挑想要的檔案合併</p>
<p>從別的分支撿檔案過來，<br><a href="https://gitbook.tw/chapters/faq/cherry-pick.html" target="_blank" rel="noopener">https://gitbook.tw/chapters/faq/cherry-pick.html</a></p>
<p>git cherry-pick 6a498ec</p>
<h2 id="git-squash"><a href="#git-squash" class="headerlink" title="git squash"></a>git squash</h2><p>改寫提交，強制提交上 gitHUB<br><a href="https://yodalee.blogspot.com/2014/04/git-squash-commit.html" target="_blank" rel="noopener">https://yodalee.blogspot.com/2014/04/git-squash-commit.html</a><br><a href="https://backlog.com/git-tutorial/tw/stepup/stepup7_5.html" target="_blank" rel="noopener">https://backlog.com/git-tutorial/tw/stepup/stepup7_5.html</a></p>
<h2 id="git-fetch"><a href="#git-fetch" class="headerlink" title="git fetch"></a>git fetch</h2><p>取遠端分支<br>git fetch origin feature/ashui/weifu_payment</p>
<h2 id="git-flog"><a href="#git-flog" class="headerlink" title="git flog"></a>git flog</h2><h3 id="使用情境-5"><a href="#使用情境-5" class="headerlink" title="使用情境"></a>使用情境</h3><p>你不小心git pull了，只看git log 還原不回去，你想要撤銷這個動作</p>
<p>运行git reflog命令查看你的历史变更记录<br>然后用git reset –hard HEAD@{n}，（n是你要回退到的引用位置）回退。</p>
<p>或是 git reset –hard 40a9a83</p>
<h1 id="gitflow-是其中一種工作流程"><a href="#gitflow-是其中一種工作流程" class="headerlink" title="gitflow 是其中一種工作流程"></a>gitflow 是其中一種工作流程</h1><p>gitflow 是其中一種工作流程<br><a href="https://gitbook.tw/chapters/gitflow/why-need-git-flow.html" target="_blank" rel="noopener">https://gitbook.tw/chapters/gitflow/why-need-git-flow.html</a></p>
<h2 id="GUI-工具"><a href="#GUI-工具" class="headerlink" title="GUI 工具"></a>GUI 工具</h2><p>那由於 gitflow 學習難度稍高一些，要團隊一起實踐比較困難，所以借助工具 smartGit，可以幫我們省下很多功夫<br><a href="https://youtu.be/ualXHytifbg" target="_blank" rel="noopener">https://youtu.be/ualXHytifbg</a></p>
<h1 id="遭遇案例（情況）"><a href="#遭遇案例（情況）" class="headerlink" title="遭遇案例（情況）"></a>遭遇案例（情況）</h1><h2 id="fatal-remote-origin-already-exists"><a href="#fatal-remote-origin-already-exists" class="headerlink" title="fatal: remote origin already exists."></a>fatal: remote origin already exists.</h2><p>是因為你那到一個包含.git 的檔案，裡面已經有人 remote 的 url，此時要刪掉時<br>git remote add origin url<br>fatal: remote origin already exists.<br>git remote rm origin<br>此時就可以再下<br>git remote add origin url</p>
<h2 id="git-replacing-LF-with-CRLF"><a href="#git-replacing-LF-with-CRLF" class="headerlink" title="git replacing LF with CRLF"></a>git replacing LF with CRLF</h2><p>If you are a single developer working on a windows machine, and you don’t care that git automatically replaces LFs to CRLFs, you can turn this warning off by typing the following in the git command line<br>git config core.autocrlf true</p>
<h2 id="查看當前檔案和前一次提交的差別"><a href="#查看當前檔案和前一次提交的差別" class="headerlink" title="查看當前檔案和前一次提交的差別"></a>查看當前檔案和前一次提交的差別</h2><p>git diff HEAD path/to/file</p>
<h2 id="更新專案"><a href="#更新專案" class="headerlink" title="更新專案"></a>更新專案</h2><p>git pull origin branch_name</p>
<h2 id="還原檔案"><a href="#還原檔案" class="headerlink" title="還原檔案"></a>還原檔案</h2><p>git checkout path/to/file</p>
<h2 id="切換分支"><a href="#切換分支" class="headerlink" title="切換分支"></a>切換分支</h2><p>git checkout branch_name</p>
<h2 id="建立新分支並切換進去"><a href="#建立新分支並切換進去" class="headerlink" title="建立新分支並切換進去"></a>建立新分支並切換進去</h2><p>git checkout -b new_branch_name</p>
<h2 id="show-上一次提交"><a href="#show-上一次提交" class="headerlink" title="show 上一次提交"></a>show 上一次提交</h2><p>git show</p>
<p>git push</p>
<h2 id="取消-git-add"><a href="#取消-git-add" class="headerlink" title="取消 git add"></a>取消 git add</h2><p>git reset HEAD [file_name]</p>
<h2 id="git-忽略檔案"><a href="#git-忽略檔案" class="headerlink" title="git 忽略檔案"></a>git 忽略檔案</h2><p>檔案，在 .gitignore 之前就存在了。.gitignore 檔案設定的規則，只對在規則設定之後的有效，那些已經存在的檔案就像既得利益者一樣，這些規則是對他們沒有效果的<br>如果想套用 .gitignore 的規則，就必須先使用 git rm –cached 指令把這些既得利益者請出 Git</p>
<h2 id="題交錯分支了"><a href="#題交錯分支了" class="headerlink" title="題交錯分支了"></a>題交錯分支了</h2><p>git reset HEAD^<br>git log<br>這樣看 log 就會發現提交被清掉了</p>
<h2 id="使用-Git-時如何做出跨-repo-的-cherry-pick"><a href="#使用-Git-時如何做出跨-repo-的-cherry-pick" class="headerlink" title="使用 Git 時如何做出跨 repo 的 cherry-pick"></a>使用 Git 時如何做出跨 repo 的 cherry-pick</h2><p><a href="https://blog.m157q.tw/posts/2017/12/30/git-cross-repo-cherry-pick/" target="_blank" rel="noopener">https://blog.m157q.tw/posts/2017/12/30/git-cross-repo-cherry-pick/</a></p>
<h2 id="git-patch-apply"><a href="#git-patch-apply" class="headerlink" title="git patch apply"></a>git patch apply</h2><p><a href="https://youtu.be/sPJkfYvdfIE" target="_blank" rel="noopener">https://youtu.be/sPJkfYvdfIE</a></p>
<p>使用情境：東西作到一半需要別人幫你繼續做，這時候就可以存成 patch</p>
<h2 id="git-佈署環境"><a href="#git-佈署環境" class="headerlink" title="git 佈署環境"></a>git 佈署環境</h2><p><a href="https://www.youtube.com/watch?v=NFsIuTFd6bA&amp;feature=youtu.be&amp;list=PLwAKR305CRO_WMJAJxGz6UCViQyAjdjgo&amp;t=599" target="_blank" rel="noopener">https://www.youtube.com/watch?v=NFsIuTFd6bA&amp;feature=youtu.be&amp;list=PLwAKR305CRO_WMJAJxGz6UCViQyAjdjgo&amp;t=599</a><br><a href="https://bolerolily.github.io/2018/08/08/%E5%88%A9%E7%94%A8Git-Hooks%E4%B8%8Ersync%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/" target="_blank" rel="noopener">https://bolerolily.github.io/2018/08/08/%E5%88%A9%E7%94%A8Git-Hooks%E4%B8%8Ersync%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/</a></p>
<h2 id="git-commit-m-加备注时如何换行"><a href="#git-commit-m-加备注时如何换行" class="headerlink" title="git commit -m 加备注时如何换行"></a>git commit -m 加备注时如何换行</h2><p>先输入双引号，但是不要输入后面的双引号，然后就可以输入多行了</p>
<h1 id="github-git-clone"><a href="#github-git-clone" class="headerlink" title="github git clone"></a>github git clone</h1><p><a href="https://serverfault.com/questions/447028/non-interactive-git-clone-ssh-fingerprint-prompt" target="_blank" rel="noopener">https://serverfault.com/questions/447028/non-interactive-git-clone-ssh-fingerprint-prompt</a><br><a href="https://superuser.com/questions/421997/what-is-a-ssh-key-fingerprint-and-how-is-it-generated" target="_blank" rel="noopener">https://superuser.com/questions/421997/what-is-a-ssh-key-fingerprint-and-how-is-it-generated</a></p>
<h2 id="空資料夾"><a href="#空資料夾" class="headerlink" title="空資料夾"></a>空資料夾</h2><p>如前言所說<br>當我們想要空資料夾，被提交到 git，我們必須在空資料夾底下新增.gitignore</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//.gitignore</span><br><span class="line">*</span><br><span class="line">!.gitignore</span><br></pre></td></tr></table></figure>
<h2 id="git-GUI-向下的箭頭"><a href="#git-GUI-向下的箭頭" class="headerlink" title="git GUI 向下的箭頭"></a>git GUI 向下的箭頭</h2><p>有的時候會在GUI軟體看到一些向下的箭頭，沒別的意思，就只是因為再拉一條線會太長，<br>為了方便顯示，它給個向下的箭頭可以展開，所以那個箭頭是可以按的</p>
<p><a href="https://juejin.cn/post/6844903669758951432" target="_blank" rel="noopener">带你一步一步看懂Git图谱</a></p>
<h2 id="如何清理git的版本庫"><a href="#如何清理git的版本庫" class="headerlink" title="如何清理git的版本庫"></a>如何清理git的版本庫</h2><p><a href="https://medium.com/@sangeethkumar.tvm.kpm/cleaning-up-a-git-repo-for-reducing-the-repository-size-d11fa496ba48" target="_blank" rel="noopener">Cleaning up a git repo for reducing the repository size</a></p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 先複製出一份沒有歷史紀錄的分支</span></span><br><span class="line">git checkout — orphan latest_branch</span><br><span class="line">git add -A</span><br><span class="line">git commit -am “Initial commit message” #Committing the changes</span><br><span class="line">git branch -D master #Deleting master branch</span><br><span class="line">git branch -m master #renaming branch as master</span><br><span class="line">git push -f origin master #pushes to master branch</span><br><span class="line">git gc — aggressive — prune=all # remove the old files</span><br></pre></td></tr></table></figure>

<h2 id="git-stash-abort"><a href="#git-stash-abort" class="headerlink" title="git stash abort"></a>git stash abort</h2><p><a href="https://stackoverflow.com/questions/8515729/how-to-abort-a-stash-pop" target="_blank" rel="noopener">How to abort a stash pop?</a></p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --merge</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://dkchange.github.io/2019/12/19/laravel%E4%BD%BF%E7%94%A8PHPunit/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Stanley Ke">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蛋粒個人網誌">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/19/laravel%E4%BD%BF%E7%94%A8PHPunit/" class="post-title-link" itemprop="url">laravel使用PHPunit</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2019-12-19 21:44:40" itemprop="dateCreated datePublished" datetime="2019-12-19T21:44:40+08:00">2019-12-19</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新於</span>
        <time title="修改時間：2020-03-12 16:38:08" itemprop="dateModified" datetime="2020-03-12T16:38:08+08:00">2020-03-12</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%8C%E7%AB%AF%E8%B7%AF%E7%B7%9A/" itemprop="url" rel="index"><span itemprop="name">後端路線</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%8C%E7%AB%AF%E8%B7%AF%E7%B7%9A/framework/" itemprop="url" rel="index"><span itemprop="name">framework</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%8C%E7%AB%AF%E8%B7%AF%E7%B7%9A/framework/laravel/" itemprop="url" rel="index"><span itemprop="name">laravel</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>TDD測試驅動開發，因為測試是自己寫的，所以不會預料到特殊情況，例如你使用者輸入什麼會發生的錯,或是某個時間點會發生的錯，能做的是就是確保程式寫大之後，東改西改<strong><em>某個流程</em></strong>不會壞掉，所以就來寫測試吧</p>
<h1 id="設定"><a href="#設定" class="headerlink" title="設定"></a>設定</h1><p>如果你有裝Telescope會報錯，在<code>phpunit.xml</code>作修改，那這個檔案時就是PHPunit執行的環境，在上面的修改實際上會覆蓋.env，然後我們希望每次執行測時都是全新的環境，所以也要修改DB的設定檔</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">php</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">server</span> <span class="attr">name</span>=<span class="string">"TELESCOPE_ENABLED"</span> <span class="attr">value</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">server</span> <span class="attr">name</span>=<span class="string">"DB_CONNECTION"</span> <span class="attr">value</span>=<span class="string">"sqlite"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">server</span> <span class="attr">name</span>=<span class="string">"DB_DATABASE"</span> <span class="attr">value</span>=<span class="string">":memory:"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">php</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="執行"><a href="#執行" class="headerlink" title="執行"></a>執行</h1><p>執行vender底下的執行檔，綠燈代表成功</p>
<pre><code>vendor/bin/phpunit
vendor/bin/phpunit --filter only_logged_in_user_can_edit_profile
vendor/bin/phpunit --filter UsersTest
vendor/bin/phpunit --unit UsersTest
//清除畫面
clear &amp;&amp; !!
那因為每次都需要打那長的指令會覺得麻煩，所以將這個指令取一個別名
alias pu = &apos;clear &amp;&amp; vendor/bin/phpunit&apos;
alias pf = &apos;clear &amp;&amp; vendor/bin/phpunit --filter&apos;
設定完之後就會在~./zhsrc看到我們的設定
那在windows底下可能就和我預期的不一樣
每次重開終端機CMD都需要再重打一次上述指令
我們可以新增一個.bash_profile檔案，裡面放著
alias pu = &apos;clear &amp;&amp; vendor/bin/phpunit&apos;
alias pf = &apos;clear &amp;&amp; vendor/bin/phpunit --filter&apos;
那在要使用別名之前，我們就先
source ~/.bash_profile
就可以使用了</code></pre><h1 id="撰寫"><a href="#撰寫" class="headerlink" title="撰寫"></a>撰寫</h1><pre><code>php artisan make:test BirthdayTest</code></pre><p><code>tests\Feature</code>資料夾底下建立我們功能檔案，我們通常會對一個controller作撰寫，一個controller對應一個功能，而且是同步進行，<strong><em>編寫程式就要編寫測試</em></strong>了，因為寫程式的當下你才會考慮到可能情況，之前有寫工廠factory這就可以派上用場，每個function名稱都要一目瞭然，名字再長也沒關係，e.g.,only_logged_in_user_can_edit_profile<br><code>tests\Unit</code>資料夾底下建立我們功能檔案，我們通常會對一個model作撰寫，unit與feature的差別是，feature包含了對使用者UI互動的測試，例如網頁會轉跳到哪裡的驗證</p>
<h2 id="常用的方法"><a href="#常用的方法" class="headerlink" title="常用的方法"></a>常用的方法</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//這一行會幫我們migrate，爾且清空</span></span><br><span class="line"><span class="keyword">use</span> <span class="title">RefreshDatabase</span>;</span><br><span class="line"><span class="comment">//所有function運行前都會先做放在裡面的邏輯，</span></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">setUp</span><span class="params">()</span>:<span class="title">void</span></span>&#123;</span><br><span class="line">    <span class="keyword">parent</span>::setUp();</span><br><span class="line">    Event::fake();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//only_logged_in_user_can_edit_profile</span></span><br><span class="line">$response = <span class="keyword">$this</span>-&gt;get(<span class="string">'/edit'</span>)-&gt;assertRedirect(<span class="string">'login'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//only_authenticate_users_can_edit_profile</span></span><br><span class="line"><span class="keyword">$this</span>-&gt;actingAs(factory(User::class)-&gt;create());</span><br><span class="line">$response = <span class="keyword">$this</span>-&gt;get(<span class="string">'/edit'</span>)-&gt;assertOk();</span><br><span class="line"></span><br><span class="line"><span class="comment">//an_user_added_through_the_form</span></span><br><span class="line"><span class="comment">//laravel內建http錯誤碼處理關掉，看真正的報錯</span></span><br><span class="line"><span class="keyword">$this</span>-&gt;withoutExceptionHanding();</span><br><span class="line"><span class="comment">//忽略Event</span></span><br><span class="line">Event::fake();</span><br><span class="line"><span class="keyword">$this</span>-&gt;actingAs(factory(User::class)-&gt;create(</span><br><span class="line">    <span class="string">'email'</span>=&gt;<span class="string">'admin@admin.com'</span></span><br><span class="line">));</span><br><span class="line"><span class="keyword">$this</span>-&gt;post(<span class="string">'/add'</span>,[</span><br><span class="line">    <span class="string">'name'</span>=&gt;<span class="string">'test user'</span>,</span><br><span class="line">    <span class="string">'email'</span>=&gt;<span class="string">'test@test.com'</span></span><br><span class="line">]);</span><br><span class="line"><span class="keyword">$this</span>-&gt;assertCount(<span class="number">1</span>,User::all());</span><br><span class="line"></span><br><span class="line"><span class="comment">//an_email_is_required</span></span><br><span class="line">$response = <span class="keyword">$this</span>-&gt;post(<span class="string">'add'</span>,array_merge(<span class="keyword">$this</span>-&gt;data(),[</span><br><span class="line">    <span class="string">'email'</span>=&gt;<span class="string">''</span></span><br><span class="line">]));</span><br></pre></td></tr></table></figure>



<h1 id="使用情境"><a href="#使用情境" class="headerlink" title="使用情境"></a>使用情境</h1><h2 id="圖片測試"><a href="#圖片測試" class="headerlink" title="圖片測試"></a>圖片測試</h2><p>Q:How to create a phpUnit test for images?<br>A:I’d prefer not to test such things<br><a href="https://stackoverflow.com/questions/39041876/how-to-create-a-phpunit-test-for-images" target="_blank" rel="noopener">https://stackoverflow.com/questions/39041876/how-to-create-a-phpunit-test-for-images</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://dkchange.github.io/2019/12/17/laravel%E4%BD%BF%E7%94%A8%E4%BA%8B%E4%BB%B6%E5%92%8C%E7%9B%A3%E8%81%BD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Stanley Ke">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蛋粒個人網誌">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/17/laravel%E4%BD%BF%E7%94%A8%E4%BA%8B%E4%BB%B6%E5%92%8C%E7%9B%A3%E8%81%BD/" class="post-title-link" itemprop="url">laravel使用事件和監聽</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2019-12-17 16:03:31" itemprop="dateCreated datePublished" datetime="2019-12-17T16:03:31+08:00">2019-12-17</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新於</span>
        <time title="修改時間：2022-01-03 14:46:57" itemprop="dateModified" datetime="2022-01-03T14:46:57+08:00">2022-01-03</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%8C%E7%AB%AF%E8%B7%AF%E7%B7%9A/" itemprop="url" rel="index"><span itemprop="name">後端路線</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%8C%E7%AB%AF%E8%B7%AF%E7%B7%9A/framework/" itemprop="url" rel="index"><span itemprop="name">framework</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%8C%E7%AB%AF%E8%B7%AF%E7%B7%9A/framework/laravel/" itemprop="url" rel="index"><span itemprop="name">laravel</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>使用場景這樣的，有的時候controller使用者註冊完之後，除了要發信件給管理者，還有發LINE訊息給管理者，這些眾多需要做的事都塞在controller會讓controller很雜亂，整個不隸屬與該controller的兩件事，寫同一個controller裡面也不對，萬一很多地方要用到呢?</p>
<h1 id="創建事件建和監聽"><a href="#創建事件建和監聽" class="headerlink" title="創建事件建和監聽"></a>創建事件建和監聽</h1><p> php artisan make:event NewCustomerHasRegisteredEvent</p>
<p><code>app\Events\NewCustomerHasRegisteredEvent.php</code></p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> $coustmer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">($coustmer)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;customer = $coustmer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> php artisan make:listener WelcomeNewCustomer</p>
<p> <code>app\Listeners\WelcomeNewCustomer.php</code></p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span><span class="params">($event)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    sleep(<span class="number">10</span>);</span><br><span class="line">    Mail::to($event-&gt;customer-&gt;email)-&gt;send(<span class="keyword">new</span> WelcomeNewUserMail());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="註冊此事件監聽"><a href="#註冊此事件監聽" class="headerlink" title="註冊此事件監聽"></a>註冊此事件監聽</h1><p> <code>/app/Providers/EventServiceProvider.php</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">protected</span> $listen = [</span><br><span class="line">    NewCustomerHasRegisteredEvent::class =&gt; [</span><br><span class="line">        \App\Listeners\WelcomeNewCustomerListener::class,</span><br><span class="line">    ],</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<p>在這裡有一個方便的點就是，如果$listen陣列內容填的是全路徑的話<br>直接</p>
<pre><code>php artisan event:ganerate</code></pre><p>就可以產生下面兩個檔案了，完全不用分別創建事件和監聽，如果事件和監聽很多的話，少打不少指令</p>
<p><code>app\Events\NewCustomerHasRegisteredEvent.php</code><br><code>app\Listeners\WelcomeNewCustomer.php</code></p>
<h1 id="觸發事件"><a href="#觸發事件" class="headerlink" title="觸發事件"></a>觸發事件</h1><p> 在要使用的controller裡面添加</p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">event(<span class="keyword">new</span> NewCustomerHasRegisteredEvent($customer));</span><br></pre></td></tr></table></figure>

<h1 id="Queues"><a href="#Queues" class="headerlink" title="Queues"></a>Queues</h1><p> 有的時候事件的服務要經過很久才會有回應，總不能讓使用者等10秒以上吧，laravel有解決方法。話說PHP又沒有異步機制，要異步的話必須要靠別的線程?laravel如何實現呢?看樣子是利用排程去做<br> 異步要依靠列隊</p>
<p> <code>.env</code><br> QUEUE_CONNECTION=database<br><code>app\Listeners\WelcomeNewCustomer.php</code><br> <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WelcomeNewCustomerListener</span> <span class="keyword">implements</span> <span class="title">ShouldQueue</span></span></span><br></pre></td></tr></table></figure></p>
<pre><code>php artisan queue:table
php artisan migrate
php artisan queue:work
要在背景執行的話在後面加上sapce+&amp;

php artisan queue:work &amp;
列出執行中的排程

jobs -l 
要儲存log的話

php artisan queue:work &gt; storage/logs/jobs.log &amp;</code></pre><p> 排程執行失敗要怎麼知道?<br> 這時候就要加個工具叫做supervisor排程關掉時他會替你重開</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://dkchange.github.io/2019/12/17/laravel%E4%BD%BF%E7%94%A8middleware/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Stanley Ke">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蛋粒個人網誌">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/17/laravel%E4%BD%BF%E7%94%A8middleware/" class="post-title-link" itemprop="url">laravel使用middleware</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2019-12-17 15:13:08" itemprop="dateCreated datePublished" datetime="2019-12-17T15:13:08+08:00">2019-12-17</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新於</span>
        <time title="修改時間：2020-01-20 18:02:06" itemprop="dateModified" datetime="2020-01-20T18:02:06+08:00">2020-01-20</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%8C%E7%AB%AF%E8%B7%AF%E7%B7%9A/" itemprop="url" rel="index"><span itemprop="name">後端路線</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%8C%E7%AB%AF%E8%B7%AF%E7%B7%9A/framework/" itemprop="url" rel="index"><span itemprop="name">framework</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%8C%E7%AB%AF%E8%B7%AF%E7%B7%9A/framework/laravel/" itemprop="url" rel="index"><span itemprop="name">laravel</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>laravel middleware用於驗證登入方面，請見<a href="/2019/11/07/laravel%E6%9C%83%E5%93%A1%E7%99%BB%E5%85%A5%E9%85%8D%E7%BD%AE/" title="會員登入配置">會員登入配置</a></p>
<h1 id="創建middleware"><a href="#創建middleware" class="headerlink" title="創建middleware"></a>創建middleware</h1><p>php artisan make:middleware AdminMiddleware</p>
<h1 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h1><h2 id="文件介紹"><a href="#文件介紹" class="headerlink" title="文件介紹"></a>文件介紹</h2><p><code>app\Http\Kernel.php</code>屬性介紹<br>每個請求都要經過註冊在<strong><em>$middleware</em></strong>裡面的middleware</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> $middleware = [</span><br><span class="line">    \App\Http\Middleware\CheckForMaintenanceMode::class,</span><br><span class="line">    \Illuminate\Foundation\Http\Middleware\ValidatePostSize::class,</span><br><span class="line">    \App\Http\Middleware\TrimStrings::class,</span><br><span class="line">    \Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull::class,</span><br><span class="line">    \App\Http\Middleware\TrustProxies::class,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<p>註冊在<strong><em>$middlewareGroups</em></strong>裡面的middleware會被應用至該路由，例如下面幾個middleware都會被應用至web.php裡面的路由</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'web'</span> =&gt; [</span><br><span class="line">    \App\Http\Middleware\EncryptCookies::class,</span><br><span class="line">    \Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse::class,</span><br><span class="line">    \Illuminate\Session\Middleware\StartSession::class,</span><br><span class="line">    <span class="comment">// \Illuminate\Session\Middleware\AuthenticateSession::class,</span></span><br><span class="line">    \Illuminate\View\Middleware\ShareErrorsFromSession::class,</span><br><span class="line">    \App\Http\Middleware\VerifyCsrfToken::class,</span><br><span class="line">    \Illuminate\Routing\Middleware\SubstituteBindings::class,</span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<p>註冊在$routeMiddleware並給名字的話可以給route用，不註冊的話就要寫全部路徑</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> $routeMiddleware = [</span><br><span class="line">    <span class="string">'admin.auth'</span>=&gt;\App\Http\Middleware\AdminMiddleware::class,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>



<h2 id="使用方法-1"><a href="#使用方法-1" class="headerlink" title="使用方法"></a>使用方法</h2><p>以下為中間件的食用方式，添加在建構子，或是個別路由<br><code>Controllers\Admin\LoginController.php</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//必須要略過登陸頁路由，因為我們需要給未登入的人用爾且我們驗證失敗會倒到這裡，會形成無窮迴圈</span></span><br><span class="line">    <span class="comment">//必須要略過登陸驗證路由，因為我們需要給未登入的人用</span></span><br><span class="line">    <span class="keyword">$this</span>-&gt;middleware(<span class="string">'admin.auth'</span>)-&gt;except([<span class="string">'loginForm'</span>,<span class="string">'login'</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>web.php</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Route::group([<span class="string">'namespace'</span> =&gt; <span class="string">'Admin'</span>], <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">    Route::get(<span class="string">'/'</span>,<span class="string">'LoginController@loginForm'</span>);</span><br><span class="line">    Route::Post(<span class="string">'/login'</span>,<span class="string">'LoginController@login'</span>);</span><br><span class="line">    Route::get(<span class="string">'/home'</span>,<span class="string">'LoginController@home'</span>);</span><br><span class="line">    Route::post(<span class="string">'/logout'</span>,<span class="string">'LoginController@logout'</span>);</span><br><span class="line">    Route::get(<span class="string">'/resetPassword'</span>,<span class="string">'ProfileController@resetPasswordForm'</span>);</span><br><span class="line">    Route::post(<span class="string">'/resetPassword'</span>,<span class="string">'ProfileController@resetPassword'</span>);</span><br><span class="line">&#125;)-&gt;middleware(<span class="string">'admin.auth'</span>);</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://dkchange.github.io/2019/12/16/laravel%E4%BD%BF%E7%94%A8mail/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Stanley Ke">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蛋粒個人網誌">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/16/laravel%E4%BD%BF%E7%94%A8mail/" class="post-title-link" itemprop="url">laravel使用mail</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2019-12-16 21:20:09" itemprop="dateCreated datePublished" datetime="2019-12-16T21:20:09+08:00">2019-12-16</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新於</span>
        <time title="修改時間：2020-01-20 18:02:06" itemprop="dateModified" datetime="2020-01-20T18:02:06+08:00">2020-01-20</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%8C%E7%AB%AF%E8%B7%AF%E7%B7%9A/" itemprop="url" rel="index"><span itemprop="name">後端路線</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%8C%E7%AB%AF%E8%B7%AF%E7%B7%9A/framework/" itemprop="url" rel="index"><span itemprop="name">framework</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%8C%E7%AB%AF%E8%B7%AF%E7%B7%9A/framework/laravel/" itemprop="url" rel="index"><span itemprop="name">laravel</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><h1 id="開發測試"><a href="#開發測試" class="headerlink" title="開發測試"></a>開發測試</h1><p>laravel預設的網站<a href="https://mailtrap.io/inboxes#" target="_blank" rel="noopener">https://mailtrap.io/inboxes#</a><br>將你的郵件訊息寄到一個「假的」郵箱，而你可以在一個真的郵件客戶端檢視它們。<br>找到頁籤和下拉選單<code>Demo inbox/smtp_settings/Integrations/laravel</code><br>將資料填進.env</p>
<pre><code>MAIL_USERNAME=
MAIL_PASSWORD=
MAIL_ENCRYPTION=</code></pre><h1 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h1><p>下指令會在view底下建資料夾</p>
<pre><code>php artisan make:mail ContactFormMail --markdown=email.contact.contact-form</code></pre><p>建完之後在要用的controller裡面</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Mail::to(<span class="string">'test@test.com'</span>)-&gt;send(<span class="keyword">new</span> ContactFormMail($data));</span><br></pre></td></tr></table></figure>
<p>在ContactFormMail裡面修改，這樣資料才傳的進view</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> $data;</span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">($data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;data = $data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://dkchange.github.io/2019/12/16/laravel%E4%BD%BF%E7%94%A8model/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Stanley Ke">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蛋粒個人網誌">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/16/laravel%E4%BD%BF%E7%94%A8model/" class="post-title-link" itemprop="url">laravel使用model</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2019-12-16 17:11:47" itemprop="dateCreated datePublished" datetime="2019-12-16T17:11:47+08:00">2019-12-16</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新於</span>
        <time title="修改時間：2021-07-30 18:14:56" itemprop="dateModified" datetime="2021-07-30T18:14:56+08:00">2021-07-30</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%8C%E7%AB%AF%E8%B7%AF%E7%B7%9A/" itemprop="url" rel="index"><span itemprop="name">後端路線</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%8C%E7%AB%AF%E8%B7%AF%E7%B7%9A/framework/" itemprop="url" rel="index"><span itemprop="name">framework</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%8C%E7%AB%AF%E8%B7%AF%E7%B7%9A/framework/laravel/" itemprop="url" rel="index"><span itemprop="name">laravel</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>這篇重點在紀錄 model 使用時的幾個知識點<br>youtue 上有教學講得很清楚，這邊是看完教學的心得紀錄<br>參考自:<a href="https://youtu.be/L1E_uJxNC3M" target="_blank" rel="noopener">https://youtu.be/L1E_uJxNC3M</a></p>
<p>laravel 框架中的 Model 操作数据库 , 相比 DB 类有什么明显的优越性吗?<br><a href="https://www.zhihu.com/question/49649216" target="_blank" rel="noopener">https://www.zhihu.com/question/49649216</a></p>
<h1 id="路由和-model-綁定"><a href="#路由和-model-綁定" class="headerlink" title="路由和 model 綁定"></a>路由和 model 綁定</h1><p>Route Model Binding</p>
<p><code>/customers/{customer}</code>路由的參數只要和 founction 參數一樣的變數名稱</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">show</span><span class="params">($customer)</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line">     <span class="comment">//when the value is not found,this will return 404</span></span><br><span class="line">     $customer = Customer::where(<span class="string">'id'</span>,$customer)-&gt;firstOrFail();</span><br><span class="line">     <span class="keyword">return</span> view(<span class="string">'customers.show'</span>, compact(<span class="string">'customer'</span>));</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>就可以省略成這樣</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">show</span><span class="params">(Customer $customer)</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> view(<span class="string">'customers.show'</span>, compact(<span class="string">'customer'</span>));</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h1 id="知識點"><a href="#知識點" class="headerlink" title="知識點"></a>知識點</h1><h2 id="Eloquent-Scopes"><a href="#Eloquent-Scopes" class="headerlink" title="Eloquent Scopes"></a>Eloquent Scopes</h2><p>這個是用來客製化查詢結果的<br>例如在 model 裡</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">scopeActive</span><span class="params">($query)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $query-&gt;where(<span class="string">'active'</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>controller 裡面就可以用<strong>靜態方法</strong>的方式調用</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ModelName::Active()-&gt;get();</span><br></pre></td></tr></table></figure>

<p>好處就是 sql 的查詢語句都放在 model 裡，controller 程式語意一目瞭然</p>
<h2 id="Mass-Assignment"><a href="#Mass-Assignment" class="headerlink" title="Mass Assignment"></a>Mass Assignment</h2><p>用在<strong>欄位驗證</strong>過後，需要多欄位寫入資料庫</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 需要填入的欄位</span></span><br><span class="line"><span class="comment">// protected $fillable = ['name', 'email', 'active'];</span></span><br><span class="line"><span class="comment">// 需要禁止的欄位</span></span><br><span class="line"><span class="keyword">protected</span> $guarded = [];</span><br></pre></td></tr></table></figure>

<p>以上兩個擇一即可，通常使用 guarded 指定空陣列<br>然後 controller 就可以直接 create，不用先 new 然後再指定個別欄位屬性再 save</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span></span><br></pre></td></tr></table></figure>

<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$data = request()-&gt;validate([]);</span><br><span class="line">ModelName::create(<span class="keyword">$this</span>-&gt;validateRequest($data));</span><br></pre></td></tr></table></figure>

<h2 id="表格關聯性"><a href="#表格關聯性" class="headerlink" title="表格關聯性"></a>表格關聯性</h2><p>Eloquent BelongsTo &amp; HasMany<br>添加外來鍵<code>/database/migrations/create_customers_table.php</code>，有既定的命名規則表名+ID</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">up</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Schema::create(<span class="string">'customers'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(Blueprint $table)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        $table-&gt;unsignedInteger(<span class="string">'company_id'</span>);</span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>/app/Company.php</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">customers</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;hasMany(Customer::class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>/app/Customer.php</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">company</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;belongsTo(Company::class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="表格創建-migration"><a href="#表格創建-migration" class="headerlink" title="表格創建 migration"></a>表格創建 migration</h2><p>以下列出常用的方法 nullable 等</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">up</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Schema::create(<span class="string">'customers'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(Blueprint $table)</span> </span>&#123;</span><br><span class="line">        $table-&gt;bigIncrements(<span class="string">'id'</span>);</span><br><span class="line">        $table-&gt;unsignedInteger(<span class="string">'company_id'</span>);</span><br><span class="line">        $table-&gt;string(<span class="string">'name'</span>);</span><br><span class="line">        $table-&gt;string(<span class="string">'email'</span>);</span><br><span class="line">        $table-&gt;integer(<span class="string">'active'</span>);</span><br><span class="line">        $table-&gt;string(<span class="string">'image'</span>)-&gt;nullable();</span><br><span class="line">        $table-&gt;timestamps();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="避免-N-1query"><a href="#避免-N-1query" class="headerlink" title="避免 N+1query"></a>避免 N+1query</h2><p>N+1 query 言下之意就是查 N 筆資料，用了 N+1 次查詢。<br>這個問題呢會出現在關聯式資料庫，尤其我們在用 ORM 時，不小心就會<br>select All 這個 query 之後再用 for 迴圈跑 N 次 qeruy</p>
<p>那既然是不小心的，有沒有辦法可以察覺?<br>laravel 有提供一個工具叫作 Telescope，跟著官網作，開發階段一旦發現有相同的網址請求太多次，應該就是犯了這個錯了</p>
<p>解決問題</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//因為我們要的欄位關聯自別的表，當for迴圈訪問到該欄位時，因為找不到該屬性，laravel就會去query這個屬性出來</span></span><br><span class="line">$customers = Customer::all();</span><br><span class="line"><span class="comment">//改成</span></span><br><span class="line">$customers = Customer::with(<span class="string">'company'</span>)-&gt;get();</span><br></pre></td></tr></table></figure>

<p>這樣就可以回復成 1 條 query 了</p>
<h2 id="分頁"><a href="#分頁" class="headerlink" title="分頁"></a>分頁</h2><p>資料庫常常會有需要分頁查詢的情形</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$customers = Customer::with(<span class="string">'company'</span>)-&gt;pagenate(<span class="number">15</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//在view這邊，用以下的方法會直接產生對應的html</span></span><br><span class="line">$customers-&gt;links();</span><br></pre></td></tr></table></figure>

<h2 id="權限存取"><a href="#權限存取" class="headerlink" title="權限存取"></a>權限存取</h2><p>我們常會有需要管理員、編輯、訪客等不同權限的需求來對資料作存取，在 laravel 就是對 model 作權限控管</p>
<h3 id="創建-policy"><a href="#創建-policy" class="headerlink" title="創建 policy"></a>創建 policy</h3><pre><code>// -m加上要控管的model名字
php artisan make:policy CustomerPolicy -m Customer</code></pre><h3 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h3><p><code>app/Policies/CustomerPolicy.php</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">view</span><span class="params">(User $user, Customer $customer)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> in_array($user-&gt;email, [</span><br><span class="line">        <span class="string">'admin@admin.com'</span>,</span><br><span class="line">    ]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>app/Http/Controllers/CustomersController.php</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">$this</span>-&gt;authorize(<span class="string">'create'</span>, Customer::class);</span><br></pre></td></tr></table></figure>

<p>或是</p>
<p><code>/routes/web.php</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Route::get(<span class="string">'customers/&#123;customer&#125;'</span>, <span class="string">'CustomersController@show'</span>)-&gt;name(<span class="string">'customers.show'</span>)-&gt;middleware(<span class="string">'can:view,customer'</span>);</span><br></pre></td></tr></table></figure>

<p><code>/resources/views/customers/index.blade.php</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@can(<span class="string">'create'</span>, App\Customer::class)</span><br><span class="line">    &lt;div class="row"&gt;</span><br><span class="line">        &lt;div class="col-12"&gt;</span><br><span class="line">            &lt;p&gt;&lt;a href=<span class="string">"&#123;&#123; route('customers.create') &#125;&#125;"</span>&gt;Add <span class="keyword">New</span> Customer&lt;/a&gt;&lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">@endcan</span><br><span class="line"></span><br><span class="line">@cannot</span><br><span class="line">&lt;p&gt; not allow to add &lt;/p&gt;</span><br><span class="line">@endcannot</span><br></pre></td></tr></table></figure>

<h2 id="關聯介紹-1-對-1"><a href="#關聯介紹-1-對-1" class="headerlink" title="關聯介紹 1 對 1"></a>關聯介紹 1 對 1</h2><p>1 to 1 這個使用場景並不常見<br>一個使用者有一個電話</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">phone</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;hasOne(Phone::class);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">user</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;belongsTo(User::class);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">up</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Schema::create(<span class="string">'phones'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(Blueprint $table)</span> </span>&#123;</span><br><span class="line">        $table-&gt;bigIncrements(<span class="string">'id'</span>);</span><br><span class="line">        $table-&gt;string(<span class="string">'phone'</span>);</span><br><span class="line">        $table-&gt;unsignedBigInteger(<span class="string">'user_id'</span>);</span><br><span class="line">        $table-&gt;timestamps();</span><br><span class="line">        $table-&gt;foreign(<span class="string">'user_id'</span>)-&gt;references(<span class="string">'id'</span>)-&gt;on(<span class="string">'users'</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//這一個待測試</span></span><br><span class="line"><span class="comment">// $phone = new \App\Phone();</span></span><br><span class="line"><span class="comment">// $phone-&gt;phone='222-333-4567';</span></span><br><span class="line"><span class="comment">// $phone-&gt;user_id=1;</span></span><br><span class="line"><span class="comment">// $phone-&gt;save();</span></span><br><span class="line"><span class="comment">//或</span></span><br><span class="line">$user = factory(\App\User::class)-&gt;create();</span><br><span class="line">$phone = <span class="keyword">new</span> \App\Phone();</span><br><span class="line">$phone-&gt;phone=<span class="string">'222-333-4567'</span>;</span><br><span class="line">$user-&gt;phone()-&gt;save();</span><br><span class="line"><span class="comment">//或</span></span><br><span class="line">$user = factory(\App\User::class)-&gt;create();</span><br><span class="line">$user-&gt;phone()-&gt;create([</span><br><span class="line">    <span class="string">'phone'</span> =&gt; <span class="string">'222-333-4567'</span>,</span><br><span class="line">]);</span><br></pre></td></tr></table></figure>

<h2 id="關聯介紹-1-對多"><a href="#關聯介紹-1-對多" class="headerlink" title="關聯介紹 1 對多"></a>關聯介紹 1 對多</h2><p>1 to many 最常見</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">user</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;belongsTo(\App\User::class);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">posts</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;hasMany(\App\Post::class);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">up</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Schema::create(<span class="string">'posts'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(Blueprint $table)</span> </span>&#123;</span><br><span class="line">        $table-&gt;bigIncrements(<span class="string">'id'</span>);</span><br><span class="line">        $table-&gt;unsignedBigInteger(<span class="string">'user_id'</span>);</span><br><span class="line">        $table-&gt;string(<span class="string">'title'</span>);</span><br><span class="line">        $table-&gt;text(<span class="string">'body'</span>);</span><br><span class="line">        $table-&gt;timestamps();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$user = factory(\App\User::class)-&gt;create();</span><br><span class="line">$post = <span class="keyword">new</span> \App\Post(</span><br><span class="line">    <span class="string">'title'</span> =&gt; <span class="string">'Title Here'</span>,</span><br><span class="line">    <span class="string">'body'</span> =&gt; <span class="string">'body Here'</span>,</span><br><span class="line">    <span class="string">'user_id'</span>=&gt; $user-&gt;id</span><br><span class="line">);</span><br><span class="line">$post-&gt;save();</span><br><span class="line"><span class="comment">//或</span></span><br><span class="line">$user = factory(\App\User::class)-&gt;create();</span><br><span class="line">$user-&gt;posts()-&gt;create([</span><br><span class="line">    <span class="string">'title'</span> =&gt; <span class="string">'Title Here'</span>,</span><br><span class="line">    <span class="string">'body'</span> =&gt; <span class="string">'body Here'</span>,</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="comment">//更新</span></span><br><span class="line">$post = $user-&gt;post-first();</span><br><span class="line">$post-&gt;title = <span class="string">'New Title'</span>;</span><br><span class="line">$post-&gt;body = <span class="string">'New Better Body'</span>;</span><br><span class="line">$post-&gt;save();</span><br><span class="line"><span class="comment">//或</span></span><br><span class="line">$user-&gt;posts-&gt;first()-&gt;title = <span class="string">'New Title'</span>;</span><br><span class="line">$user-&gt;posts-&gt;first()-&gt;body = <span class="string">'New Better Body'</span>;</span><br><span class="line">$user-&gt;push();</span><br></pre></td></tr></table></figure>

<h2 id="關聯介紹多對多"><a href="#關聯介紹多對多" class="headerlink" title="關聯介紹多對多"></a>關聯介紹多對多</h2><p>什麼情況下會用到 N to N 呢?<br>有一種情況是權限列表，我使用者有多個權限，權限又有多個使用者，此時再建一個表來對應權限和使用者，就會是多對多的情況，那關聯式資料庫的好處就是你刪掉一個，他會提醒你另外一張表也要刪，或是一起刪掉</p>
<p>那通常情形是這樣的，我會除了這張對應的關係表，還會再作一張角色的表，這張表只對應到權限，用來給客戶快速選取用，實際作權限判斷用不到這方面相對複雜，詳情請看前言的 youtube 連結，有老師把把手把手帶</p>
<h1 id="api-輸出格式化"><a href="#api-輸出格式化" class="headerlink" title="api 輸出格式化"></a>api 輸出格式化</h1><p>有的時候們資料庫撈出來的東西還需要再格式化，例如日期格式化，這這方面就不寫在 controller 了<br>php artisan make:resource Contact</p>
<h1 id="遞迴表格"><a href="#遞迴表格" class="headerlink" title="遞迴表格"></a>遞迴表格</h1><p><a href="https://stackoverflow.com/questions/26652611/laravel-recursive-relationships" target="_blank" rel="noopener">https://stackoverflow.com/questions/26652611/laravel-recursive-relationships</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://dkchange.github.io/2019/11/15/%E4%BD%BF%E7%94%A8vue/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Stanley Ke">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蛋粒個人網誌">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/11/15/%E4%BD%BF%E7%94%A8vue/" class="post-title-link" itemprop="url">使用vue</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2019-11-15 21:17:46" itemprop="dateCreated datePublished" datetime="2019-11-15T21:17:46+08:00">2019-11-15</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新於</span>
        <time title="修改時間：2021-07-30 18:16:06" itemprop="dateModified" datetime="2021-07-30T18:16:06+08:00">2021-07-30</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%B7%9A/" itemprop="url" rel="index"><span itemprop="name">前端路線</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%B7%9A/framework/" itemprop="url" rel="index"><span itemprop="name">framework</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%B7%9A/framework/vue/" itemprop="url" rel="index"><span itemprop="name">vue</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>之前學框架都是一點點碰，學都學半套，angular 碰不到 2 個禮拜，reactNative 碰不到 2 個月，學完就忘，現在來主動學 vue 吧，畢竟是最早跟 laravel 一起搭的前端框架</p>
<h1 id="安裝"><a href="#安裝" class="headerlink" title="安裝"></a>安裝</h1><p>整個裝案的建置可以看說明書慢慢裝，但是等真的裝好設定好就不知道牛年馬月，透過腳手架 vue-cli 來裝會簡單些，等以後有機會再來了解如何配置</p>
<pre><code>sudo npm install -g @vue/cli

vue create myvue</code></pre><p>自選安裝的項目或者用高級的 GUI 來裝也行</p>
<p>Check the features needed for your project:<br>◉ Babel<br>◯ TypeScript<br>◯ Progressive Web App (PWA) Support<br>◉ Router<br>◉ Vuex<br>◯ CSS Pre-processors<br>◉ Linter / Formatter<br>◯ Unit Testing<br>◯ E2E Testing</p>
<p>難過的是即便用腳手架來裝問題還是會一堆</p>
<p>error Found incompatible module.<br>ERROR command failed: yarn –registry=<a href="https://registry.npm.taobao.org" target="_blank" rel="noopener">https://registry.npm.taobao.org</a><br>user 底下.vuerc 改<br>{<br>“useTaobaoRegistry”: false,<br>“packageManager”: “npm”,<br>}<br><a href="https://github.com/vuejs/vue-cli/issues/889#issuecomment-397225829" target="_blank" rel="noopener">https://github.com/vuejs/vue-cli/issues/889#issuecomment-397225829</a></p>
<p>linux 環境還是失敗，windows 環境倒是成功了，先在本機開發吧</p>
<h1 id="安裝-vue-apollo"><a href="#安裝-vue-apollo" class="headerlink" title="安裝 vue-apollo"></a>安裝 vue-apollo</h1><pre><code>vue add apollo</code></pre><p>error: ‘vue-cli-plugin-apollo’ should be listed in the project’s dependencies, not devDependencies</p>
<pre><code>npm install vue-cli-plugin-apollo --save-prod</code></pre><p>error: ‘graphql-tag’ should be listed in the project’s dependencies, not devDependencies (import/no-extraneous-dependencies)</p>
<pre><code>npm cache clean --force

npm install graphql-tag --save-prod</code></pre><h1 id="設置-IDE"><a href="#設置-IDE" class="headerlink" title="設置 IDE"></a>設置 IDE</h1><p>可以發現專案在儲存時不會 autofix，<br><a href="https://juejin.im/post/5b39f274f265da59a07c5836" target="_blank" rel="noopener">https://juejin.im/post/5b39f274f265da59a07c5836</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"eslint.autoFixOnSave"</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="string">"eslint.validate"</span>: [</span><br><span class="line">    <span class="string">"javascript"</span>,</span><br><span class="line">    <span class="string">"javascriptreact"</span>,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">"language"</span>: <span class="string">"html"</span>,</span><br><span class="line">        <span class="string">"autoFix"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">"language"</span>: <span class="string">"vue"</span>,</span><br><span class="line">        <span class="string">"autoFix"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<h1 id="vue-冷知識"><a href="#vue-冷知識" class="headerlink" title="vue 冷知識"></a>vue 冷知識</h1><p>你知道路徑裡的@為什麼是 src 嗎?<br><a href="https://stackoverflow.com/questions/42749973/es6-import-using-at-sign-in-path-in-a-vue-js-project-using-webpack" target="_blank" rel="noopener">https://stackoverflow.com/questions/42749973/es6-import-using-at-sign-in-path-in-a-vue-js-project-using-webpack</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @ is an alias to /src</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">"@/components/Home"</span>;</span><br></pre></td></tr></table></figure>

<p><a href="https://github.com/vuejs/vue-apollo/issues/263" target="_blank" rel="noopener">https://github.com/vuejs/vue-apollo/issues/263</a></p>
<p>Expected linebreaks to be ‘LF’ but found ‘CRLF’.<br>最簡單的方法就是 VSC 右下角切換成 LF</p>
<h1 id="gql-檔案上傳"><a href="#gql-檔案上傳" class="headerlink" title="gql 檔案上傳"></a>gql 檔案上傳</h1><p>不用設定什麼就可以上傳檔案<br>遇到的問題:請求回傳<br>“message”: “Undefined index: File”,<br>“exception”: “ErrorException”,<br>“file”: “/var/www/html/myproject/vendor/nuwave/lighthouse/src/Schema/TypeRegistry.php”,<br>然後看 header 那邊多了字串</p>
<pre><code>fragment file on File</code></pre><p>真的是搞死我，gql 檔不要有空白或註解<del>#import “./FileFragment.gql”</del>刪掉就沒事了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;./FileFragment.gql&quot;</span><br><span class="line"></span><br><span class="line">mutation($file: Upload!) &#123;</span><br><span class="line">  upload(file: $file)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="測試"><a href="#測試" class="headerlink" title="測試"></a>測試</h1><p>遭遇問題<br>Q:npm ERR! peer dep missing: canvas<br>A:Just upgrade your npm version to the latest.<br><a href="https://github.com/vuejs/vue-cli/issues/4869" target="_blank" rel="noopener">https://github.com/vuejs/vue-cli/issues/4869</a></p>
<h1 id="關於-yii-觸控事件"><a href="#關於-yii-觸控事件" class="headerlink" title="關於 yii 觸控事件"></a>關於 yii 觸控事件</h1><p>自己實作<br>九宮格相關<br><a href="https://stackoverflow.com/questions/57723142/handling-touchstart-touchmove-touchend-the-same-way-as-mousedown-mousemove-mouse" target="_blank" rel="noopener">https://stackoverflow.com/questions/57723142/handling-touchstart-touchmove-touchend-the-same-way-as-mousedown-mousemove-mouse</a><br>長按事件<br><a href="https://segmentfault.com/a/1190000013922322" target="_blank" rel="noopener">https://segmentfault.com/a/1190000013922322</a></p>
<p>相關的庫</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left" aria-label="上一頁"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right" aria-label="下一頁"></i></a>
  </nav>



      

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

    </div>
  </main>

  <footer class="footer">
    <div class="footer-inner">
      

      

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Stanley Ke</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 強力驅動
  </div>

    </div>
  </footer>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.0/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  















  








  

  

</body>
</html>
