<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"dkchange.github.io","root":"/","scheme":"Muse","version":"8.0.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜尋...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="蛋粒個人網誌">
<meta property="og:url" content="http:&#x2F;&#x2F;dkchange.github.io&#x2F;page&#x2F;5&#x2F;index.html">
<meta property="og:site_name" content="蛋粒個人網誌">
<meta property="og:locale" content="zh-TW">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://dkchange.github.io/page/5/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-TW'
  };
</script>

  <title>蛋粒個人網誌</title>
  






  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">蛋粒個人網誌</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          本站概要
        </li>
      </ul>

      <!--noindex-->
      <section class="post-toc-wrap sidebar-panel">
      </section>
      <!--/noindex-->

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Stanley Ke</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">78</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">35</span>
        <span class="site-state-item-name">分類</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">44</span>
        <span class="site-state-item-name">標籤</span></a>
      </div>
  </nav>
</div>



      </section>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">
      

      
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://dkchange.github.io/2020/04/06/%E4%BD%BF%E7%94%A8docker/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Stanley Ke">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蛋粒個人網誌">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/06/%E4%BD%BF%E7%94%A8docker/" class="post-title-link" itemprop="url">使用docker</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2020-04-06 09:32:25" itemprop="dateCreated datePublished" datetime="2020-04-06T09:32:25+08:00">2020-04-06</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新於</span>
        <time title="修改時間：2023-03-18 10:29:13" itemprop="dateModified" datetime="2023-03-18T10:29:13+08:00">2023-03-18</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/DevOps%E8%B7%AF%E7%B7%9A/" itemprop="url" rel="index"><span itemprop="name">DevOps路線</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/DevOps%E8%B7%AF%E7%B7%9A/CI-CD%E5%B7%A5%E5%85%B7/" itemprop="url" rel="index"><span itemprop="name">CI/CD工具</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/DevOps%E8%B7%AF%E7%B7%9A/CI-CD%E5%B7%A5%E5%85%B7/docker/" itemprop="url" rel="index"><span itemprop="name">docker</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>容器造就了許多現代化服務，諸如 serverless function as a service，然而技術的演變越來越快，那我們就必須跟著學新工具，新流程，新術語</p>
<p>為什麼你需要 docker，因為你追求效率，速度，在容器化出現之前，你大概 80％的時間都都在做維運的事，更新，備份，佈署<br>在 docker 出現之後，你可以更專注於開發</p>
<p>docker 和 vagrant 有何不同<br><a href="http://blog.iwonder.tw/2017/12/27/reflection-of-vagrant-and-docker-positioning/" target="_blank" rel="noopener">http://blog.iwonder.tw/2017/12/27/reflection-of-vagrant-and-docker-positioning/</a><br><a href="https://peihsinsu.gitbooks.io/docker-note-book/content/docker_data_volume_container.html" target="_blank" rel="noopener">https://peihsinsu.gitbooks.io/docker-note-book/content/docker_data_volume_container.html</a></p>
<p>因為工作需要，開始使用 docker<br>參考文章：<a href="https://ithelp.ithome.com.tw/users/20103456/ironman/1320" target="_blank" rel="noopener">https://ithelp.ithome.com.tw/users/20103456/ironman/1320</a><br>docker image 是眾多 images 的集合，方便管理</p>
<p><a href="https://medium.com/@charliecc/docker-%E7%B7%B4%E7%BF%92%E7%AD%86%E8%A8%98-vol-1-df59d4fdc9c9" target="_blank" rel="noopener">https://medium.com/@charliecc/docker-%E7%B7%B4%E7%BF%92%E7%AD%86%E8%A8%98-vol-1-df59d4fdc9c9</a></p>
<p>第二是 Docker container 也跟寫程式一樣，有 decouple(解藕合)的概念，我的開發環境通常會是 php + Nginx ，剛開始建的時候曾為了一個問題糾結很久：我到底應該要在<br>在 php 的 image 上裝 Nginx？<br>在 Nginx 的 image 上裝 php?<br>用一個乾淨的 alpine image，在上面裝 php + Nginx？<br>每個都會遇到不同的問題，後來看了一篇分享豁然開朗，兩個 image 分開，各司其職，這樣容易維護，調整功能也非常容易。<br>有時候因為正式部署環境或其他需求的關係，你可能需要建成單一 image 來作業，這邊以開發時期，快速調整為前提</p>
<h1 id="Alpine-Linux-挑戰最小-docker-image-OS"><a href="#Alpine-Linux-挑戰最小-docker-image-OS" class="headerlink" title="Alpine Linux 挑戰最小 docker image OS"></a>Alpine Linux 挑戰最小 docker image OS</h1><p>官方都會出一個服務例如 php，nginx，mysql<br>然而這些服務，你連接到 php container 的時候，bash 下 mysql 在該 container 並找不到 mysql<br>所以各項服務都是由 docker 來橋接的</p>
<h1 id="exited"><a href="#exited" class="headerlink" title="exited"></a>exited</h1><p>有的時候官方的映像檔啟動時並不如你預期<br>可能會出現 status exited 1<br>這時候就來查 log 啦<br>docker-compose logs 服務名<br>docker logs 容器 id</p>
<h2 id="如何開發與維運"><a href="#如何開發與維運" class="headerlink" title="如何開發與維運"></a>如何開發與維運</h2><p><a href="https://ithelp.ithome.com.tw/articles/10185892" target="_blank" rel="noopener">https://ithelp.ithome.com.tw/articles/10185892</a></p>
<h1 id="docker-目錄解說"><a href="#docker-目錄解說" class="headerlink" title="docker 目錄解說"></a>docker 目錄解說</h1><p><a href="https://www.jianshu.com/p/02c1051245d2" target="_blank" rel="noopener">https://www.jianshu.com/p/02c1051245d2</a></p>
<h1 id="自建環境"><a href="#自建環境" class="headerlink" title="自建環境"></a>自建環境</h1><p>sudo docker build . -t myyii –no-cache<br>sudo<br>sudo docker run -d –name yii-adv -p 8088:80 <br> -v /home/stanley/Desktop/mydockertest/www/yii-adv:/var/www/yii-adv <br> -v /home/stanley/Desktop/mydockertest/nginx-yii-adv.conf:/etc/nginx/conf.d/default.conf <br> –network=desktop_backend <br> myyii</p>
<p>sudo docker run -d –name yii-basic -p 8089:80 <br> -v /home/stanley/Desktop/mydockertest/www/yii-basic:/var/www/yii-basic <br> -v /home/stanley/Desktop/mydockertest/nginx-yii-basic.conf:/etc/nginx/conf.d/default.conf <br> –network=desktop_backend <br> myyii</p>
<p><a href="https://stackoverflow.com/questions/46266527/could-not-reliably-determine-the-servers-fully-qualified-domain-name-how-to" target="_blank" rel="noopener">https://stackoverflow.com/questions/46266527/could-not-reliably-determine-the-servers-fully-qualified-domain-name-how-to</a></p>
<p>有成功，但還要在設定 apache 那些<br>sudo docker run -d –name mypay –hostname myphppay.com -p 8087:80 <br> -v /home/stanley/Desktop/Docker/php5217/weifu:/var/www mypay</p>
<p>docker run mypay 不在背景執行看報什麼錯<br>docker run -dit mypay 可以強行執行<br>然後再進去看哪裡錯</p>
<p><a href="https://stackoverflow.com/questions/28212380/why-docker-container-exits-immediately" target="_blank" rel="noopener">https://stackoverflow.com/questions/28212380/why-docker-container-exits-immediately</a></p>
<p>改換<br><a href="https://github.com/fifilyu/docker-php-5.2.17-fpm" target="_blank" rel="noopener">https://github.com/fifilyu/docker-php-5.2.17-fpm</a><br>docker run -d –name mypay -p 8087:8080 docker-php-5.2.17-fpm<br>sudo docker run -d –name mypay -v /home/stanley/Downloads/weifu/zfb:/data/web <br>-p 8087:8080 <br>docker-php-5.2.17-fpm</p>
<p>sudo docker network ls</p>
<p>default.conf /etc/nginx/conf.d/default.conf<br>sudo docker run -d –name yiitest -p 8088:80 -v /home/stanley/Desktop/mydockertest/www:/var/www –network=desktop_backend myyii</p>
<p>sudo docker exec -it yiitest /bin/bash</p>
<p>sudo stats 會秀出 container 佔用的資源</p>
<p>sudo logs containerName 會 show 出如果執行在前景的 log</p>
<h1 id="dockerfile"><a href="#dockerfile" class="headerlink" title="dockerfile"></a>dockerfile</h1><p><a href="https://github.com/kaushalkishorejaiswal/Docker-Centos-Nginx-PHP" target="_blank" rel="noopener">https://github.com/kaushalkishorejaiswal/Docker-Centos-Nginx-PHP</a></p>
<pre><code>vi Dockerfile
撰寫dokerfile

ADD nginx.repo /etc/yum.repos.d/nginx.repo
ADD 把 Local 的檔案複製到 Image 裡

RUN yum -y install nginx
RUN Linux 指令
RUN yum update -y &amp;&amp; \
    yum install -y epel-release</code></pre><p><strong>&amp;&amp; \</strong>用來連接字串</p>
<p>以下是 centos 推薦庫<br><a href="https://zoneless.blog/2018/01/07/install-repository-on-centos7/" target="_blank" rel="noopener">https://zoneless.blog/2018/01/07/install-repository-on-centos7/</a></p>
<pre><code>VOLUME ./www
掛載local位置給container，然而你無法指定container的對應的位置
只能透過指令來完成A Dockerfile defines how an image is built, not how it&apos;s used
https://stackoverflow.com/questions/47942016/add-bind-mount-to-dockerfile-just-like-volume
using -v /path/on/host:/path/in/container to access directories from the host.

EXPOSE 80
對外開放80port

WORKDIR /var/www/
預設工作目錄

CMD [&quot;supervisord&quot;, &quot;-n&quot;]
在執行docker run
之後會直接開啟這個程式</code></pre><h1 id="docker-image"><a href="#docker-image" class="headerlink" title="docker image"></a>docker image</h1><pre><code>docker build -t imageName . --no-cache</code></pre><p>在剛剛的 dockerfile 目錄下指令，客製 docker image</p>
<p>docker run -p 8080:8080 imageName</p>
<p>執行該 image<br>run 自家專案時，出現了以下錯誤<br>exited: php5-fpm-log (exit status 1; not expected)<br>是因為我們有執行 supervisor，所以在前景出現這個正常</p>
<p>所以記得加上-d 在背景執行<br>docker run -p 8088:80 -d imageName<br>加上 port 號的對應之後，就可以用 localhost:8088 進入改該專案</p>
<h1 id="bash"><a href="#bash" class="headerlink" title="bash"></a>bash</h1><pre><code>docker run -it --entrypoint bash imageName
docker exec -it docker_id /bin/bash
sudo docker exec -it yiitest /bin/bash</code></pre><p>進入該 container</p>
<p>當進入容器時，要進行服務開啟會保下列的錯<br>Failed to get D-Bus connection: Operation not permitted<br>原因是因為 <strong><em>Docker 的设计理念是在容器里面不运行后台服务</em></strong><br><a href="https://blog.51cto.com/lizhenliang/1975466" target="_blank" rel="noopener">https://blog.51cto.com/lizhenliang/1975466</a></p>
<p>所以最好一開始就在 dockerfile 寫好要啟動的服務</p>
<h1 id="docker-compose"><a href="#docker-compose" class="headerlink" title="docker-compose"></a>docker-compose</h1><p>docker-compose 可使用的指令比 docker 多很多，因為連結各個 container<br>docker-compose 雖然是獨立的軟體，但是和 docker 還是有相依性，所以安裝時要注意版本<br>docker-compose up -d<br>驗證 docker-compose.yml 內容是否正確<br>啟動很多個 Docker Container 時，就需要輸入很多次 docker run 指令，另外 container 和 container 之間要做關聯的話也要記得它們之間要如何的連結(link) Container</p>
<pre><code>volumes:
  - &quot;./m88web:/var/www&quot;
  - &quot;./config/freetds.conf:/etc/freetds.conf&quot;
  - &quot;./config/nginx/backend.conf:/etc/nginx/conf.d/default.conf&quot;</code></pre><p>用上面的設定做檔案的替換</p>
<pre><code>在有docker-compose.yml的資料夾底下，下
sudo docker-compose up -d
如果檔案有做修改，會把新增的service建起來，但已經打開的不會因為你註解就關掉，以防你註解錯直接關掉，引發災情，所以要關掉就手動關吧


docker info
列出docker相關訊息image path等


sudo docker ps -a
列出所有運作的container

sudo docker-compose stop container_id
停止單一container

sudo docker stop $(sudo docker ps -a -q)
停止所有container

sudo docker rm $(sudo docker rm -a -q)
移除所有container

image has dependent child images
查出有相依的images
sudo docker image inspect  --format=&apos;{{.RepoTags}} {{.Id}} {{.Parent}}&apos; $(sudo docker image ls -q --filter since=container_id)

sudo docker-compose exec serviceName bash
進入container環境,這裡和docker不一樣，用的是yml檔裡面設定的serviceName
尔且切记一定要在docker-compose.yml的目录下执行

exit
離開container

因為adminer有版本相關問題，所以決定rebuild image
Postgres: ERROR: column d.adsrc does not exist 4.7.5版本以上才ok
sudo docker-compose up -d --no-deps --build adminer
sudo docker-compose up -d --no-deps --build m88-mapi
sudo docker-compose buil m1-frontend
不须去pull 新版的adminer image</code></pre><h2 id="quot-bash-quot-executable-file-not-found-in-PATH”"><a href="#quot-bash-quot-executable-file-not-found-in-PATH”" class="headerlink" title="&quot;bash&quot;: executable file not found in $PATH”"></a>&quot;bash&quot;: executable file not found in $PATH”</h2><p>有的精简的 docker 镜像使用的 Alpine 这个 Linux 发行版，没有内置 bash 的。所以应该用 /bin/sh<br>docker exec -it XXXXX /bin/sh</p>
<h2 id="电脑重啟后"><a href="#电脑重啟后" class="headerlink" title="电脑重啟后"></a>电脑重啟后</h2><p>电脑重起之后有设定 restart:always 的服务基本上都会重啟，没有设定的就要自己手动下指令<br>sudo docker restart container_name<br>sudo docker-compose restart service_name</p>
<h1 id="container-内指定登入的使用者"><a href="#container-内指定登入的使用者" class="headerlink" title="container 内指定登入的使用者"></a>container 内指定登入的使用者</h1><p>會指定使用者權限通常都是有掛載 Host volume 進入容器內，但是您又沒有 root 權限，如果沒有這樣做，<br>這樣產生出來的檔案都會是 root 權限，一般使用者無法寫入，只能讀取，這時就需要用到此方法。<br><a href="https://blog.wu-boy.com/2019/10/three-ways-to-setup-docker-user-and-group/" target="_blank" rel="noopener">https://blog.wu-boy.com/2019/10/three-ways-to-setup-docker-user-and-group/</a><br>假設我是 stanley 登入 local 端，在 container 裡面是 uid 1001,但沒有此 user，我們可以改用 uid 1001 去 run container,<br>uid 在 host 和 container 的關係<br><a href="https://gist.github.com/mrtns/69a92fb387c20bf9add622c4304876b6" target="_blank" rel="noopener">https://gist.github.com/mrtns/69a92fb387c20bf9add622c4304876b6</a><br>但是这样又会遇到常驻程式 daemon 无法 run 的问题，<br>所以我折衷的方法是，用 local root 登入 vsc 做编辑，这样一樣是 root,編輯檔案就不会有权限问题了,但是這樣就變成 local 端在下指令時都要是 sudo,其也相當不方便<br>要不然就是要設定資料夾權限全部 777, 不懂數字轉換可以到以下網址<br><a href="https://chmod-calculator.com/" target="_blank" rel="noopener">https://chmod-calculator.com/</a></p>
<h2 id="是否會影響其他的使用者執行"><a href="#是否會影響其他的使用者執行" class="headerlink" title="是否會影響其他的使用者執行"></a>是否會影響其他的使用者執行</h2><p>會，git commit 會連權限都 commit 進去，但是因為你的檔案擁有者會隨著 git pull 下來而改變，所以一般都不會受影響<br>git checkout/diff 略過 file permission 屬性<br>git config core.fileMode false</p>
<p><a href="https://stackoverflow.com/questions/40978921/how-to-add-chmod-permissions-to-file-in-git/40979016" target="_blank" rel="noopener">https://stackoverflow.com/questions/40978921/how-to-add-chmod-permissions-to-file-in-git/40979016</a></p>
<h1 id="看-log"><a href="#看-log" class="headerlink" title="看 log"></a>看 log</h1><p>docker inspect $container_id<br>sudo docker logs desktop_m88-mapi_1</p>
<h1 id="網路設定"><a href="#網路設定" class="headerlink" title="網路設定"></a>網路設定</h1><p><a href="https://godleon.github.io/blog/Docker/docker-network-bridge/" target="_blank" rel="noopener">https://godleon.github.io/blog/Docker/docker-network-bridge/</a></p>
<p>那通常 docker-compose 之後，你可以在 host 檔上加一些域名，會讓自己方便一些，例如<br>127.0.0.1 postgres<br>127.0.0.1 mssql<br>127.0.0.1 mysql<br>不全部都是 localhost 看起來比較不會那麼亂，用 adminer 連專案，還會幫你選預設 port 號，很方便喔</p>
<h1 id="設定-user"><a href="#設定-user" class="headerlink" title="設定 user"></a>設定 user</h1><p><a href="https://medium.com/@mccode/understanding-how-uid-and-gid-work-in-docker-containers-c37a01d01cf" target="_blank" rel="noopener">https://medium.com/@mccode/understanding-how-uid-and-gid-work-in-docker-containers-c37a01d01cf</a></p>
<h1 id="clone-a-container"><a href="#clone-a-container" class="headerlink" title="clone a container"></a>clone a container</h1><p>docker commit<br>阿如果你有掛載東西，掛載的資料不會被複製喔<br><a href="https://gist.github.com/thaJeztah/8d0e901bd21329d80cf2" target="_blank" rel="noopener">https://gist.github.com/thaJeztah/8d0e901bd21329d80cf2</a></p>
<h1 id="利用-SSH-對多台遠端主機下指令"><a href="#利用-SSH-對多台遠端主機下指令" class="headerlink" title="利用 SSH 對多台遠端主機下指令"></a>利用 SSH 對多台遠端主機下指令</h1><p><a href="https://medium.com/@charliecc/%E5%88%A9%E7%94%A8-ssh-%E5%B0%8D%E5%A4%9A%E5%8F%B0%E9%81%A0%E7%AB%AF%E4%B8%BB%E6%A9%9F%E4%B8%8B%E6%8C%87%E4%BB%A4-a1504cfd1e64" target="_blank" rel="noopener">https://medium.com/@charliecc/%E5%88%A9%E7%94%A8-ssh-%E5%B0%8D%E5%A4%9A%E5%8F%B0%E9%81%A0%E7%AB%AF%E4%B8%BB%E6%A9%9F%E4%B8%8B%E6%8C%87%E4%BB%A4-a1504cfd1e64</a></p>
<h1 id="當你用-docker-compose"><a href="#當你用-docker-compose" class="headerlink" title="當你用 docker-compose"></a>當你用 docker-compose</h1><p>‘mysql:host=1270.0.1;dbname=yiivue;’,<br>一直失敗<br><a href="https://stackoverflow.com/questions/40561433/docker-mysql-2002-connection-refused" target="_blank" rel="noopener">https://stackoverflow.com/questions/40561433/docker-mysql-2002-connection-refused</a><br>要用 service name<br>‘mysql:host=db;dbname=yiivue;’,</p>
<h1 id="熱門的專案"><a href="#熱門的專案" class="headerlink" title="熱門的專案"></a>熱門的專案</h1><p>當你使用的技術比較熱門時，你的資源總是會比較多，可以加快你的學習速度<br><a href="https://github.com/yii2-starter-kit/yii2-starter-kit" target="_blank" rel="noopener">https://github.com/yii2-starter-kit/yii2-starter-kit</a></p>
<h1 id="使用-alpine-nodejs-時候出現-python-找不到"><a href="#使用-alpine-nodejs-時候出現-python-找不到" class="headerlink" title="使用 alpine nodejs 時候出現 python 找不到"></a>使用 alpine nodejs 時候出現 python 找不到</h1><p><a href="https://github.com/nodejs/docker-node/issues/384" target="_blank" rel="noopener">https://github.com/nodejs/docker-node/issues/384</a><br>這時候可能就要撰寫 dockerfile 了</p>
<h1 id="Could-not-reliably-determine-the-server’s-fully-qualified-domain-name"><a href="#Could-not-reliably-determine-the-server’s-fully-qualified-domain-name" class="headerlink" title="Could not reliably determine the server’s fully qualified domain name"></a>Could not reliably determine the server’s fully qualified domain name</h1><p><a href="https://stackoverflow.com/questions/46266527/could-not-reliably-determine-the-servers-fully-qualified-domain-name-how-to" target="_blank" rel="noopener">https://stackoverflow.com/questions/46266527/could-not-reliably-determine-the-servers-fully-qualified-domain-name-how-to</a></p>
<h1 id="使用-docker-compose-安裝的工具指令"><a href="#使用-docker-compose-安裝的工具指令" class="headerlink" title="使用 docker-compose 安裝的工具指令"></a>使用 docker-compose 安裝的工具指令</h1><p>像是我把 node 命名為 webpacker</p>
<p>docker-compose run webpacker npm install –save vue-circle-slider</p>
<h1 id="服務"><a href="#服務" class="headerlink" title="服務"></a>服務</h1><p>使用 docker-compose 在使用服務的時候，使用 adminer 存取資料庫相關服務，用 localhost:port 號，會有無法存取資料庫的問題，但是在 host 加完服務名稱 mysql，使用 mysql 或 mysql:3306 就可以正常存取，所以在此推測服務也是有對應域名之類的關係，但是自己架的純網站的服務用 用服務名或 localhost:port 號存取 又都沒什麼事，可以正常存取，之後再來探討，應該是官方的 image 有做設定吧？那內部的服務互相溝通舊部需要再填 port 號了，port 號是給給本機外連的程式用的</p>
<h1 id="切換使用者之後鍵盤上下鍵失效"><a href="#切換使用者之後鍵盤上下鍵失效" class="headerlink" title="切換使用者之後鍵盤上下鍵失效"></a>切換使用者之後鍵盤上下鍵失效</h1><p>after su in container the arrow keys seems not woking<br><a href="https://github.com/jupyter/notebook/issues/2457" target="_blank" rel="noopener">https://github.com/jupyter/notebook/issues/2457</a></p>
<p>the issue by explicitly setting the SHELL env var to /bin/bash</p>
<p>所以就 執行一次/bin/bash 就可以使用 bash 了</p>
<h1 id="如何不重啟容器就讓php-fpm服務reload-config"><a href="#如何不重啟容器就讓php-fpm服務reload-config" class="headerlink" title="如何不重啟容器就讓php-fpm服務reload config"></a>如何不重啟容器就讓php-fpm服務reload config</h1><p>php-fpm is a process manager which supports the USER2 signal, which is used to reload the config file.</p>
<p>From inside the container:</p>
<pre><code>kill -USR2 1</code></pre><p>Outside:</p>
<pre><code>docker exec -it &lt;mycontainer&gt; kill -USR2 1</code></pre><p>Complete example:</p>
<pre><code>docker run -d --name test123 php:7.1-fpm-alpine
docker exec -it test123 ps aux
docker exec -it test123 kill -USR2 1
docker exec -it test123 ps aux</code></pre><p><a href="https://stackoverflow.com/questions/37806188/how-to-restart-php-fpm-inside-a-docker-container" target="_blank" rel="noopener">https://stackoverflow.com/questions/37806188/how-to-restart-php-fpm-inside-a-docker-container</a></p>
<h1 id="docker-compose-v2"><a href="#docker-compose-v2" class="headerlink" title="docker-compose v2"></a>docker-compose v2</h1><p>docker-compose 變成插件的形式，所以我們可以加個別名解決這個問題<br><a href="https://github.com/docker/compose/issues/8575#issuecomment-906298809" target="_blank" rel="noopener">如何安裝docker-compose</a></p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alias docker-compose="docker compose"</span><br></pre></td></tr></table></figure>

<h1 id="如何清理docker-log"><a href="#如何清理docker-log" class="headerlink" title="如何清理docker log"></a>如何清理docker log</h1><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">truncate -s 0 /var/lib/docker/containers/*/*-json.log</span><br></pre></td></tr></table></figure>
<p><a href="https://stackoverflow.com/questions/42510002/docker-how-to-clear-the-logs-properly-for-a-docker-container" target="_blank" rel="noopener">https://stackoverflow.com/questions/42510002/docker-how-to-clear-the-logs-properly-for-a-docker-container</a></p>
<h1 id="dev-stdout"><a href="#dev-stdout" class="headerlink" title="/dev/stdout"></a>/dev/stdout</h1><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 輸出到螢幕上</span></span><br><span class="line">stanley@localhost:~$ echo '123' &gt; /dev/stdout</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://dkchange.github.io/2020/04/06/%E4%BD%BF%E7%94%A8ubuntu%E5%9C%96%E5%BD%A2%E7%95%8C%E9%9D%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Stanley Ke">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蛋粒個人網誌">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/06/%E4%BD%BF%E7%94%A8ubuntu%E5%9C%96%E5%BD%A2%E7%95%8C%E9%9D%A2/" class="post-title-link" itemprop="url">使用ubuntu圖形界面</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2020-04-06 09:18:34" itemprop="dateCreated datePublished" datetime="2020-04-06T09:18:34+08:00">2020-04-06</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新於</span>
        <time title="修改時間：2021-07-30 18:11:28" itemprop="dateModified" datetime="2021-07-30T18:11:28+08:00">2021-07-30</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>因為工作需要開始接觸ubuntu，在此紀錄一些設定</p>
<h1 id="顯示資料夾隱藏檔案"><a href="#顯示資料夾隱藏檔案" class="headerlink" title="顯示資料夾隱藏檔案"></a>顯示資料夾隱藏檔案</h1><p>在檔案瀏覽器開啟後按ctrl+h組合鍵</p>
<h1 id="呼叫出terminal"><a href="#呼叫出terminal" class="headerlink" title="呼叫出terminal"></a>呼叫出terminal</h1><p>ctrl+alt+t</p>
<h1 id="中文輸入法"><a href="#中文輸入法" class="headerlink" title="中文輸入法"></a>中文輸入法</h1><p>參考：<a href="https://blog.xuite.net/yh96301/blog/342227672-Ubuntu+16.0.4%E6%96%B0%E5%A2%9E%E4%B8%AD%E6%96%87%E8%BC%B8%E5%85%A5%E6%B3%95-%E6%96%B0%E9%85%B7%E9%9F%B3%E8%BC%B8%E5%85%A5%E6%B3%95" target="_blank" rel="noopener">https://blog.xuite.net/yh96301/blog/342227672-Ubuntu+16.0.4%E6%96%B0%E5%A2%9E%E4%B8%AD%E6%96%87%E8%BC%B8%E5%85%A5%E6%B3%95-%E6%96%B0%E9%85%B7%E9%9F%B3%E8%BC%B8%E5%85%A5%E6%B3%95</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://dkchange.github.io/2020/03/12/%E4%BD%BF%E7%94%A8reactNative/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Stanley Ke">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蛋粒個人網誌">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/12/%E4%BD%BF%E7%94%A8reactNative/" class="post-title-link" itemprop="url">使用reactNative</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2020-03-12 16:44:37" itemprop="dateCreated datePublished" datetime="2020-03-12T16:44:37+08:00">2020-03-12</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新於</span>
        <time title="修改時間：2021-07-30 18:16:06" itemprop="dateModified" datetime="2021-07-30T18:16:06+08:00">2021-07-30</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%B7%9A/" itemprop="url" rel="index"><span itemprop="name">前端路線</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%B7%9A/framework/" itemprop="url" rel="index"><span itemprop="name">framework</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%B7%9A/framework/react/" itemprop="url" rel="index"><span itemprop="name">react</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>因為工作需求所以接觸了RN</p>
<h1 id="redux"><a href="#redux" class="headerlink" title="redux"></a>redux</h1><h2 id="情境"><a href="#情境" class="headerlink" title="情境"></a>情境</h2><p>Q:Why shall I use Redux rather than a plain global object to centralize state in a React application?<br>A:<br>Because you don’t have to write it yourself<br>Because you don’t have to explain it<br>Because you don’t have to maintain it<br><a href="https://www.quora.com/Why-shall-I-use-Redux-rather-than-a-plain-global-object-to-centralize-state-in-a-React-application" target="_blank" rel="noopener">https://www.quora.com/Why-shall-I-use-Redux-rather-than-a-plain-global-object-to-centralize-state-in-a-React-application</a><br>這篇解釋得非常清楚</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://dkchange.github.io/2020/03/12/%E5%A5%BD%E7%94%A8%E6%8F%92%E4%BB%B6%E8%88%87%E8%A8%AD%E5%AE%9A/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Stanley Ke">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蛋粒個人網誌">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/12/%E5%A5%BD%E7%94%A8%E6%8F%92%E4%BB%B6%E8%88%87%E8%A8%AD%E5%AE%9A/" class="post-title-link" itemprop="url">好用工具,插件與設定</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2020-03-12 16:35:30" itemprop="dateCreated datePublished" datetime="2020-03-12T16:35:30+08:00">2020-03-12</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新於</span>
        <time title="修改時間：2022-03-04 12:58:15" itemprop="dateModified" datetime="2022-03-04T12:58:15+08:00">2022-03-04</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E4%BB%BB%E4%BD%95%E8%B7%AF%E7%B7%9A/" itemprop="url" rel="index"><span itemprop="name">任何路線</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>太多好用的插件，當你換工作或電腦壞掉時會後悔沒有把名字記下來</p>
<h1 id="tool"><a href="#tool" class="headerlink" title="tool"></a>tool</h1><h1 id="ngrok"><a href="#ngrok" class="headerlink" title="ngrok"></a>ngrok</h1><p><a href="https://blog.techbridge.cc/2018/05/24/ngrok/" target="_blank" rel="noopener">https://blog.techbridge.cc/2018/05/24/ngrok/</a><br>平常要測試東西不可能無端生出一個 domain 給你，這個時候你就需要<br>一個可以把你 localhost 對應到 https public domain 的服務</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./ngrok http 10000</span><br><span class="line">或是指定virtual host</span><br><span class="line">./ngrok http -host-header=rewrite home.dev:80</span><br></pre></td></tr></table></figure>

<h1 id="mRemoteNG"><a href="#mRemoteNG" class="headerlink" title="mRemoteNG"></a>mRemoteNG</h1><p>開源的集中式管理軟體</p>
<h1 id="Hunting-Dog"><a href="#Hunting-Dog" class="headerlink" title="Hunting Dog"></a>Hunting Dog</h1><p>Sql Server Management Studio 上的插件，不然要找一隻 sp 真的有點麻煩</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> o.name, c.* <span class="keyword">FROM</span> syscomments c</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> sysobjects o <span class="keyword">ON</span> c.id=o.id</span><br><span class="line"><span class="keyword">WHERE</span> (o.xtype = <span class="string">'P'</span>           <span class="comment">--查SP</span></span><br><span class="line"><span class="keyword">OR</span> o.xtype = <span class="string">'V'</span>)              <span class="comment">--查View</span></span><br><span class="line"><span class="keyword">And</span> (o.name <span class="keyword">LIKE</span> <span class="string">'%特定文字%'</span>  <span class="comment">--查SP或View名稱</span></span><br><span class="line"><span class="keyword">OR</span> c.text <span class="keyword">LIKE</span> <span class="string">'%特定文字%'</span>)   <span class="comment">--查SP或View內含文字</span></span><br></pre></td></tr></table></figure>

<h1 id="How-to-track-the-program"><a href="#How-to-track-the-program" class="headerlink" title="How to track the program?"></a>How to track the program?</h1><p>Highly recommend <a href="http://www.rohitab.com" target="_blank" rel="noopener">http://www.rohitab.com</a> and <a href="http://www.sandboxie.com" target="_blank" rel="noopener">http://www.sandboxie.com</a>. Both utilities are free. Description of more than 10,000 api functions is included in the Api Monitor program by default. For example, you can install hooks for networking functions (I don’t remember which ones, see msdn). And as soon as the program sends or receives something to the network, monitor will pause it. Then see what parameters and data are passed to these functions. By the way, all parameters that are passed to the function can be changed in the api monitor</p>
<h1 id="找回失聯的網址"><a href="#找回失聯的網址" class="headerlink" title="找回失聯的網址"></a>找回失聯的網址</h1><p><a href="http://web.archive.org/" target="_blank" rel="noopener">http://web.archive.org/</a><br>Wayback Machine這個網站就是做這件事的唷，我們只要輸入一個網址，就可以讓我們依照年份與月份來瀏覽該網站的舊版面，這種時光回溯功能除了可以讓我們回味一下舊網站的記憶</p>
<h1 id="繞過forticlient-vpn"><a href="#繞過forticlient-vpn" class="headerlink" title="繞過forticlient vpn"></a>繞過forticlient vpn</h1><p><a href="https://community.fortinet.com/t5/FortiClient/FortiClient-VPN-Internet-Browsing-issues-Windows-dial-up/ta-p/191366?externalID=11614" target="_blank" rel="noopener">FortiClient VPN Internet Browsing issues Windows dial-up connections</a></p>
<p><a href="https://a7432186.pixnet.net/blog/post/348696967" target="_blank" rel="noopener">多重網路環境，雙網卡 自動指向某網路出去上網設定方法 同時使用公司 內網 外網 固網中斷臨時串接方法｜自動計量</a></p>
<p><a href="https://walker-a.com/archives/3097" target="_blank" rel="noopener">Windows 10 VPN連線後，無法連線到網際網路了嗎？</a></p>
<p><a href="https://superuser.com/questions/949306/windows-10-windows-vpn-ipv4-properties-not-accessible/979698" target="_blank" rel="noopener">Windows 10 windows VPN IPv4 properties not accessible</a></p>
<p><a href="https://superuser.com/questions/689686/cant-change-routes-with-vpn-client" target="_blank" rel="noopener">Can’t change routes with VPN Client</a></p>
<p><a href="https://home.gamer.com.tw/creationDetail.php?sn=5094397" target="_blank" rel="noopener">Win10 內建 指定網路介面卡負責與特定IP的通訊 (特定IP走VPN)</a></p>
<p><a href="https://superuser.com/questions/294008/use-vpn-connection-only-for-selected-applications" target="_blank" rel="noopener">Use VPN connection only for selected applications</a></p>
<p><a href="https://www.reddit.com/r/fortinet/comments/nxjhnc/is_it_possible_to_bypass_the_forticlient_tunnel/" target="_blank" rel="noopener">Is it possible to bypass the FortiClient tunnel on Windows OS?</a></p>
<h1 id="監控工具"><a href="#監控工具" class="headerlink" title="監控工具"></a>監控工具</h1><p> Bugsnag Exception Monitoring<br> Kibana Monitoring Tools</p>
<h1 id="Windows-套件管理工具-Scoop"><a href="#Windows-套件管理工具-Scoop" class="headerlink" title="Windows 套件管理工具 - Scoop"></a>Windows 套件管理工具 - Scoop</h1><p> Scoop 、 Chocolatey 或 WinGet 這類工具可以讓你像是使用 Homebrew 或 apt-get 一樣在 Windows 上管理安裝的軟體</p>
<p> <a href="https://mics.tw/posts/2015/11/install-composer-with-scoop-at-windows/" target="_blank" rel="noopener">https://mics.tw/posts/2015/11/install-composer-with-scoop-at-windows/</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://dkchange.github.io/2020/03/12/laravel%E4%BD%BF%E7%94%A8pusher/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Stanley Ke">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蛋粒個人網誌">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/12/laravel%E4%BD%BF%E7%94%A8pusher/" class="post-title-link" itemprop="url">laravel使用pusher</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2020-03-12 16:22:27" itemprop="dateCreated datePublished" datetime="2020-03-12T16:22:27+08:00">2020-03-12</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新於</span>
        <time title="修改時間：2025-04-04 22:26:50" itemprop="dateModified" datetime="2025-04-04T22:26:50+08:00">2025-04-04</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%8C%E7%AB%AF%E8%B7%AF%E7%B7%9A/" itemprop="url" rel="index"><span itemprop="name">後端路線</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%8C%E7%AB%AF%E8%B7%AF%E7%B7%9A/framework/" itemprop="url" rel="index"><span itemprop="name">framework</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%8C%E7%AB%AF%E8%B7%AF%E7%B7%9A/framework/laravel/" itemprop="url" rel="index"><span itemprop="name">laravel</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>工作中有很多情境需要接第三方的服務，因為公司不可能每項服務都自己開發，今天利用pusher來練習接websocket第三方，<br>前端使用vue<br>參考網址:<br><a href="https://pusher.com/tutorials/chat-laravel" target="_blank" rel="noopener">https://pusher.com/tutorials/chat-laravel</a></p>
<h1 id="註冊pusher"><a href="#註冊pusher" class="headerlink" title="註冊pusher"></a>註冊pusher</h1>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://dkchange.github.io/2020/03/12/laravel%E4%BD%BF%E7%94%A8migrate/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Stanley Ke">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蛋粒個人網誌">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/12/laravel%E4%BD%BF%E7%94%A8migrate/" class="post-title-link" itemprop="url">laravel使用migrate</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2020-03-12 16:15:40" itemprop="dateCreated datePublished" datetime="2020-03-12T16:15:40+08:00">2020-03-12</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新於</span>
        <time title="修改時間：2021-07-30 18:14:15" itemprop="dateModified" datetime="2021-07-30T18:14:15+08:00">2021-07-30</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%8C%E7%AB%AF%E8%B7%AF%E7%B7%9A/" itemprop="url" rel="index"><span itemprop="name">後端路線</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%8C%E7%AB%AF%E8%B7%AF%E7%B7%9A/framework/" itemprop="url" rel="index"><span itemprop="name">framework</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%8C%E7%AB%AF%E8%B7%AF%E7%B7%9A/framework/laravel/" itemprop="url" rel="index"><span itemprop="name">laravel</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>假設你的資料表的建好了，你想要對資料庫做修改，但是資料不能清空，所以不能修改現有的檔案再migrate一次，你只能新增一個migration來修改資料庫的表格</p>
<h1 id="使用情境"><a href="#使用情境" class="headerlink" title="使用情境"></a>使用情境</h1><h2 id="修改資料表的欄位名稱"><a href="#修改資料表的欄位名稱" class="headerlink" title="修改資料表的欄位名稱"></a>修改資料表的欄位名稱</h2><pre><code>https://stackoverflow.com/questions/51130611/rename-column-in-laravel-using-migration</code></pre>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://dkchange.github.io/2020/03/10/%E9%96%B1%E8%AE%80PSR/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Stanley Ke">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蛋粒個人網誌">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/10/%E9%96%B1%E8%AE%80PSR/" class="post-title-link" itemprop="url">閱讀PSR</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2020-03-10 21:47:47" itemprop="dateCreated datePublished" datetime="2020-03-10T21:47:47+08:00">2020-03-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新於</span>
        <time title="修改時間：2021-07-30 18:16:53" itemprop="dateModified" datetime="2021-07-30T18:16:53+08:00">2021-07-30</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%8C%E7%AB%AF%E8%B7%AF%E7%B7%9A/" itemprop="url" rel="index"><span itemprop="name">後端路線</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%8C%E7%AB%AF%E8%B7%AF%E7%B7%9A/PHP/" itemprop="url" rel="index"><span itemprop="name">PHP</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%8C%E7%AB%AF%E8%B7%AF%E7%B7%9A/PHP/PSR/" itemprop="url" rel="index"><span itemprop="name">PSR</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>PHP 有 FIG 這個非官方組織，制定了一些最佳實踐，你不一定要遵守，但是常常會在人力銀行上面看到<br>筆記來自於 Laravel China 的中文文檔<br><a href="https://learnku.com/docs/psr/psr-0-automatic-loading-specification/1603" target="_blank" rel="noopener">https://learnku.com/docs/psr/psr-0-automatic-loading-specification/1603</a><br><a href="https://blog.tonycube.com/2016/09/php-psr-4-autoloader.html" target="_blank" rel="noopener">https://blog.tonycube.com/2016/09/php-psr-4-autoloader.html</a><br><a href="https://events.storm.mg/codingstyle/coding_style/php/psr-4.html" target="_blank" rel="noopener">https://events.storm.mg/codingstyle/coding_style/php/psr-4.html</a></p>
<h1 id="重構"><a href="#重構" class="headerlink" title="重構"></a>重構</h1><p>優雅的重構<br><a href="https://docs.google.com/presentation/d/10vxyi5VXSSZ4MMjLrKAIhrnpmuCjdDaZ_4K7ma1KIys/edit#slide=id.g76e5fccd8c_0_71" target="_blank" rel="noopener">https://docs.google.com/presentation/d/10vxyi5VXSSZ4MMjLrKAIhrnpmuCjdDaZ_4K7ma1KIys/edit#slide=id.g76e5fccd8c_0_71</a></p>
<h1 id="PSR-0-Autoloading-Standard-已棄用"><a href="#PSR-0-Autoloading-Standard-已棄用" class="headerlink" title="PSR-0 (Autoloading Standard)(已棄用)"></a>PSR-0 (Autoloading Standard)(已棄用)</h1><h1 id="PSR-1-Basic-Coding-Standard"><a href="#PSR-1-Basic-Coding-Standard" class="headerlink" title="PSR-1 (Basic Coding Standard)"></a>PSR-1 (Basic Coding Standard)</h1><h1 id="PSR-2-Coding-Style-Guide"><a href="#PSR-2-Coding-Style-Guide" class="headerlink" title="PSR-2 (Coding Style Guide)"></a>PSR-2 (Coding Style Guide)</h1><h1 id="PSR-4-Autoloading-Standard"><a href="#PSR-4-Autoloading-Standard" class="headerlink" title="PSR-4 (Autoloading Standard)"></a>PSR-4 (Autoloading Standard)</h1><p>範例：<br><a href="https://jsnwork.kiiuo.com/archives/2618/php-composer-%E9%9D%9E%E5%B8%B8%E7%B0%A1%E5%96%AE%E7%9A%84%E4%BD%BF%E7%94%A8-psr-4-%E4%BE%86%E5%BB%BA%E7%AB%8B%E8%87%AA%E5%8B%95%E8%AE%80%E5%8F%96%E9%A1%9E%E5%88%A5/" target="_blank" rel="noopener">https://jsnwork.kiiuo.com/archives/2618/php-composer-%E9%9D%9E%E5%B8%B8%E7%B0%A1%E5%96%AE%E7%9A%84%E4%BD%BF%E7%94%A8-psr-4-%E4%BE%86%E5%BB%BA%E7%AB%8B%E8%87%AA%E5%8B%95%E8%AE%80%E5%8F%96%E9%A1%9E%E5%88%A5/</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://dkchange.github.io/2020/03/09/%E4%BD%BF%E7%94%A8mysql/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Stanley Ke">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蛋粒個人網誌">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/09/%E4%BD%BF%E7%94%A8mysql/" class="post-title-link" itemprop="url">使用mysql</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2020-03-09 11:08:30" itemprop="dateCreated datePublished" datetime="2020-03-09T11:08:30+08:00">2020-03-09</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新於</span>
        <time title="修改時間：2023-04-19 07:52:52" itemprop="dateModified" datetime="2023-04-19T07:52:52+08:00">2023-04-19</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><h1 id="環境設定"><a href="#環境設定" class="headerlink" title="環境設定"></a>環境設定</h1><h1 id="遭遇案例"><a href="#遭遇案例" class="headerlink" title="遭遇案例"></a>遭遇案例</h1><ol>
<li><p>Access denied for user ‘root’@’localhost’<br>你只能藉由 sudo mysql -p 來登入資料庫是一件很麻煩的事，你的程式也需要權限來訪問資料庫<br><a href="https://blog.csdn.net/zhouyingge1104/article/details/85254895" target="_blank" rel="noopener">https://blog.csdn.net/zhouyingge1104/article/details/85254895</a><br><a href="https://www.opencli.com/mysql/reset-mysql-mariadb-root-password" target="_blank" rel="noopener">https://www.opencli.com/mysql/reset-mysql-mariadb-root-password</a></p>
</li>
<li><p>Display positive and negative values in different column</p>
</li>
</ol>
<p><a href="https://www.c-sharpcorner.com/forums/display-positive-and-negative-values-in-different-column" target="_blank" rel="noopener">https://www.c-sharpcorner.com/forums/display-positive-and-negative-values-in-different-column</a></p>
<ol start="3">
<li>MYSQL 查找所有的父级或子级<br><a href="https://segmentfault.com/a/1190000007531328" target="_blank" rel="noopener">https://segmentfault.com/a/1190000007531328</a></li>
</ol>
<h1 id="分表"><a href="#分表" class="headerlink" title="分表"></a>分表</h1><p><a href="https://kkc.github.io/2017/07/07/mysql-partitioning/" target="_blank" rel="noopener">https://kkc.github.io/2017/07/07/mysql-partitioning/</a></p>
<h1 id="效能問題"><a href="#效能問題" class="headerlink" title="效能問題"></a>效能問題</h1><ul>
<li>server 硬體<ul>
<li>cpu 要看當前的 mysql 支不支援多核心處理同一語句</li>
<li>那如果一個核心只能處理一句，那 n 個核心就可以處理 n 句 sql</li>
<li>在高併發的情況下，多核心會比高頻的 cpu 重要</li>
<li>64 位元的 cpu 不要用 32 位元版本的軟體</li>
<li>大記憶體（內存），高頻率記憶體</li>
<li>傳統硬碟，高容量，高傳輸速度，高轉速，物理尺寸小</li>
<li>RAID 多個小硬碟組成一個大硬碟<ul>
<li>RAID0 讀快寫快，沒有修復能力</li>
<li>RAID1 讀快寫慢，有鏡像備份</li>
<li>RAID5 讀快寫中，有備份</li>
<li>RAID10 讀快寫快，有備份</li>
</ul>
</li>
<li>SSD 受限 sata 界面傳輸速度 支援 RAID</li>
<li>PCIESSD 貴，要裝驅動，但不受限於 sata</li>
<li>SAN NAS 網路儲存 不如 RAID，只適合做數據備份</li>
<li>網路，高性能交換機，對多張網卡進行綁定，用以增加頻寬</li>
</ul>
</li>
<li>server 系統<ul>
<li>windlow 系統下不分大小寫，需要做參數設定讓其能區分</li>
<li>freebsd</li>
<li>solaris</li>
<li>linux 挑選 server 版的</li>
</ul>
</li>
<li>db 儲存引擎選擇<ul>
<li>MyISAM:5.5 以前的默認引擎，不支持 transation，支援表級鎖，可壓縮表，適合只讀的應用</li>
<li>InnoDB:5.5 以後的默認引擎，5.6 默認使用獨立表空間儲存數據，支持 transation,支援行級鎖，事務 acid 特性，5.7 之後支援全文索引，空間函數</li>
<li>csv:非二制文件，是以儲存文本的方式，所以可以直接查看，就是 excel 的文件來當一個表，不支援索引，不支援 null</li>
</ul>
</li>
<li>參數設定<ul>
<li>centos<ul>
<li>內核相關參數/etc/sysctl.conf</li>
</ul>
</li>
</ul>
</li>
<li>db 結構設計和 sql 語句</li>
</ul>
<p>QPS：Queries Per Second 意思是“每秒查詢率” 每秒可以查詢幾句 sql<br>TPS：是 TransactionsPerSecond 的縮寫，也就是事務數/秒<br>併發量：高併發要調高 mysql 連接數 max_connections 默認 100<br>cpu 使用率<br>硬碟 io<br>網卡流量：<br>避免使用 select *</p>
<h1 id="大表遇到的問題"><a href="#大表遇到的問題" class="headerlink" title="大表遇到的問題"></a>大表遇到的問題</h1><p>主從延遲<br>修改表結構時間長，會鎖表</p>
<p>解決方法：<br>分庫分表<br>歷史數據歸檔</p>
<h1 id="transation"><a href="#transation" class="headerlink" title="transation"></a>transation</h1><h2 id="原子性-atomicity"><a href="#原子性-atomicity" class="headerlink" title="原子性 atomicity"></a>原子性 atomicity</h2><p>一筆交易最小的單位，失敗就全部回滾</p>
<h2 id="一致性-consistency"><a href="#一致性-consistency" class="headerlink" title="一致性(consistency)"></a>一致性(consistency)</h2><p>轉帳前轉帳後，總金額須一樣</p>
<h2 id="隔離性"><a href="#隔離性" class="headerlink" title="隔離性"></a>隔離性</h2><ul>
<li>未提交讀</li>
<li>已提交讀（大多數 rmdb 的預設）</li>
<li>可重複讀</li>
<li>可串行化</li>
</ul>
<h2 id="持久性"><a href="#持久性" class="headerlink" title="持久性"></a>持久性</h2><p>資料不會不見</p>
<blockquote>
<p>show variables like ‘%iso%’</p>
</blockquote>
<h1 id="大-transation-遇到的問題"><a href="#大-transation-遇到的問題" class="headerlink" title="大 transation 遇到的問題"></a>大 transation 遇到的問題</h1><p>鎖的表太多會造成阻塞<br>rollback 時間長<br>容易造成主從延遲</p>
<h1 id="transation-新手問題"><a href="#transation-新手問題" class="headerlink" title="transation 新手問題"></a>transation 新手問題</h1><p>在MySQL的InnoDB中，预设的Tansaction isolation level 为REPEATABLE READ（可重读），所以事務的操作除了可以維持原子性，提供的鎖也可以避免髒讀，不重複的讀取</p>
<p>1.其他 proccess 去 select 在 transaction 中變動的資料 會是變動前還是後？</p>
<p>要看其他 proccess 怎麼去 select，如果下 nolock 就可以查到未 commit 的資料，而正常情況下因為 update 的資料會使用獨佔鎖，所以其他 proccess 會被鎖住，必需等待交易完成後才能查詢資料。</p>
<p>2.使用 command 直接 kill 正在 sleep 的 proccess 是會自動rollback嗎？</p>
<p>會，未 commit 的資料，連線中斷或資料庫當機，都會自動 rollback，這樣才能確保資料是正確可靠的。<br><a href="https://ithelp.ithome.com.tw/questions/10192987?sc=rss.qu" target="_blank" rel="noopener">https://ithelp.ithome.com.tw/questions/10192987?sc=rss.qu</a><br><a href="https://stackoverflow.com/questions/22846438/why-does-select-for-update-works-only-within-a-transaction" target="_blank" rel="noopener">https://stackoverflow.com/questions/22846438/why-does-select-for-update-works-only-within-a-transaction</a></p>
<p><a href="https://www.cnblogs.com/houweijian/p/5869243.html" target="_blank" rel="noopener">https://www.cnblogs.com/houweijian/p/5869243.html</a></p>
<p><a href="https://segmentfault.com/a/1190000014133576" target="_blank" rel="noopener">https://segmentfault.com/a/1190000014133576</a></p>
<p><a href="https://segmentfault.com/a/1190000022732257" target="_blank" rel="noopener">https://segmentfault.com/a/1190000022732257</a></p>
<h1 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h1><p>解决方案：</p>
<ul>
<li>把SELECT和UPDATE合成一条SQL</li>
<li>用一个事务来包裹上面的SELECT+UPDATE操作</li>
<li>乐观锁，类CAS机制<br><a href="https://blog.csdn.net/dainandainan1/article/details/109120038" target="_blank" rel="noopener">MySQL中SELECT+UPDATE并发更新问题</a></li>
</ul>
<h1 id="影響數據庫的效能"><a href="#影響數據庫的效能" class="headerlink" title="影響數據庫的效能"></a>影響數據庫的效能</h1><ul>
<li><p>表的設計合理化(符合 3NF)</p>
</li>
<li><p>添加適當的索引<br>a. 普通索引<br>b. 主鍵索引<br>c. 唯一索引<br>d. 全文索引<br>e. 空間索引</p>
<ul>
<li>分表<br>a. 水平分割<br>b. 垂直分割</li>
<li>讀寫分離</li>
<li>存儲過程SP 因為不需要再編譯</li>
<li>配置最大併發數</li>
<li>硬體升級</li>
<li>定期清除數據，進行碎片整理</li>
</ul>
<h1 id="主從同步"><a href="#主從同步" class="headerlink" title="主從同步"></a>主從同步</h1><p><a href="https://cloud.tencent.com/developer/article/1832929" target="_blank" rel="noopener">https://cloud.tencent.com/developer/article/1832929</a></p>
<h1 id="比較少用的sql語句"><a href="#比較少用的sql語句" class="headerlink" title="比較少用的sql語句"></a>比較少用的sql語句</h1><p>sql find_in_set() vs match() against()</p>
<p>force index</p>
<p>explain<br><a href="https://www.cnblogs.com/acm-bingzi/p/mysqlExplain.html" target="_blank" rel="noopener">https://www.cnblogs.com/acm-bingzi/p/mysqlExplain.html</a><br><a href="https://smilenicky.blog.csdn.net/article/details/100853310" target="_blank" rel="noopener">https://smilenicky.blog.csdn.net/article/details/100853310</a></p>
</li>
</ul>
<h2 id="查找資料庫裡面的欄位名稱"><a href="#查找資料庫裡面的欄位名稱" class="headerlink" title="查找資料庫裡面的欄位名稱"></a>查找資料庫裡面的欄位名稱</h2><p> select column_name,table_name from informateion_schema.columns where column_name like ‘%ip%’;</p>
<h1 id="主從複製-單表複製"><a href="#主從複製-單表複製" class="headerlink" title="主從複製-單表複製"></a>主從複製-單表複製</h1><p><a href="https://blog.csdn.net/weixin_67857994/article/details/123546958?spm=1001.2101.3001.6650.7&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-7-123546958-blog-113947355.pc_relevant_aa&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-7-123546958-blog-113947355.pc_relevant_aa&amp;utm_relevant_index=10" target="_blank" rel="noopener">https://blog.csdn.net/weixin_67857994/article/details/123546958?spm=1001.2101.3001.6650.7&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-7-123546958-blog-113947355.pc_relevant_aa&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-7-123546958-blog-113947355.pc_relevant_aa&amp;utm_relevant_index=10</a><br>主從複製單表或多個表</p>
<h1 id="區分主庫從庫"><a href="#區分主庫從庫" class="headerlink" title="區分主庫從庫"></a>區分主庫從庫</h1><p><a href="http://www.itpub.net/thread-1737186-1-1.html" target="_blank" rel="noopener">http://www.itpub.net/thread-1737186-1-1.html</a></p>
<p>slave会有relay-log日志文件<br>or</p>
<p>有没有master.info的信息，有就是从库<br>or<br>show slave status<br>show master status<br>or</p>
<blockquote>
<p>show global status like ‘Slave_running’;  </p>
</blockquote>
<h1 id="mysql-in-not-in-優化"><a href="#mysql-in-not-in-優化" class="headerlink" title="mysql in not in 優化"></a>mysql in not in 優化</h1><p>用了exist變快<br><a href="https://blog.csdn.net/gua___gua/article/details/47401621" target="_blank" rel="noopener">https://blog.csdn.net/gua___gua/article/details/47401621</a><br>用了exist變慢<br><a href="https://blog.csdn.net/fly910905/article/details/78288685" target="_blank" rel="noopener">https://blog.csdn.net/fly910905/article/details/78288685</a></p>
<h1 id="db-塞假資料"><a href="#db-塞假資料" class="headerlink" title="db 塞假資料"></a>db 塞假資料</h1><p>產生測試資料(假資料)<br><a href="https://ithelp.ithome.com.tw/articles/10147387?sc=pt" target="_blank" rel="noopener">https://ithelp.ithome.com.tw/articles/10147387?sc=pt</a></p>
<h1 id="log-before-cascade-delete"><a href="#log-before-cascade-delete" class="headerlink" title="log before cascade delete"></a>log before cascade delete</h1><p><a href="https://stackoverflow.com/questions/11496459/can-i-use-a-procedure-to-store-history-log-before-on-delete-cascade" target="_blank" rel="noopener">https://stackoverflow.com/questions/11496459/can-i-use-a-procedure-to-store-history-log-before-on-delete-cascade</a></p>
<h1 id="opratoin-log-in-mysql"><a href="#opratoin-log-in-mysql" class="headerlink" title="opratoin log in mysql"></a>opratoin log in mysql</h1><p><a href="https://stackoverflow.com/questions/303994/log-all-queries-in-mysql" target="_blank" rel="noopener">https://stackoverflow.com/questions/303994/log-all-queries-in-mysql</a></p>
<h1 id="mysql單表同步"><a href="#mysql單表同步" class="headerlink" title="mysql單表同步"></a>mysql單表同步</h1><ol>
<li><p>如果你只是要臨時複製AB表的資料，<br>語法就可以達成:<br>其中主鍵要對應好，不然會有資料遺失的問題<br>insert into A資料庫名稱.A資料表 select * from B資料庫名稱.B資料表<br>where not exists(select * from A資料庫名稱.A資料表 where A資料庫名稱.A資料表.ID = B資料庫名稱.B資料表.ID)</p>
</li>
<li><p>創建觸發器<br>trigger</p>
</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> test1</span><br><span class="line"></span><br><span class="line">DELIMITER //</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> Pee_insert_host <span class="keyword">AFTER</span> <span class="keyword">INSERT</span> <span class="keyword">ON</span> host <span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="keyword">ROW</span> <span class="keyword">BEGIN</span> <span class="keyword">INSERT</span> <span class="keyword">INTO</span> test2.host <span class="keyword">VALUES</span> (new.id,new.host,new.port,new.user,new.pwd); <span class="keyword">END</span>;//</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> Pee_delete_host <span class="keyword">AFTER</span> <span class="keyword">DELETE</span> <span class="keyword">ON</span> host <span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="keyword">ROW</span> <span class="keyword">BEGIN</span> <span class="keyword">DELETE</span> <span class="keyword">from</span> test2.host <span class="keyword">where</span> test2.host.id=old.id; <span class="keyword">END</span>;//</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> Pee_update_host <span class="keyword">AFTER</span> <span class="keyword">UPDATE</span> <span class="keyword">ON</span> host <span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="keyword">ROW</span> <span class="keyword">BEGIN</span> <span class="keyword">UPDATE</span> test2.host <span class="keyword">SET</span> host=new.host,port=new.port,<span class="keyword">user</span>=new.user,pwd=new.pwd <span class="keyword">WHERE</span> test2.host.id=new.id; <span class="keyword">END</span>;//</span><br><span class="line"></span><br><span class="line">// 查看触发器：</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> information_schema.<span class="string">`TRIGGERS`</span>;</span><br><span class="line"></span><br><span class="line">// 删除触发器：</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TRIGGER</span> TRIGGER_NAME;</span><br></pre></td></tr></table></figure>

<p>原文：<a href="https://blog.csdn.net/weixin_39958019/article/details/113634347" target="_blank" rel="noopener">https://blog.csdn.net/weixin_39958019/article/details/113634347</a></p>
<ol start="3">
<li>用mysql 同步功能<br>google 搜尋 mysql主从只同步部分库或表</li>
</ol>
<p>原文:<a href="https://www.cnblogs.com/weifeng1463/p/8662241.html" target="_blank" rel="noopener">mysql主从只同步部分库或表</a><br>master端：<br>binlog-do-db      二进制日志记录的数据库（多数据库用逗号，隔开）<br>binlog-ignore-db 二进制日志中忽略数据库 （多数据库用逗号，隔开）</p>
<p>slave端<br>replicate-do-db    设定需要复制的数据库（多数据库使用逗号，隔开）<br>replicate-ignore-db 设定需要忽略的复制数据库 （多数据库使用逗号，隔开）<br>replicate-do-table  设定需要复制的表<br>replicate-ignore-table 设定需要忽略的复制表<br>replicate-wild-do-table 同replication-do-table功能一样，但是可以通配符<br>replicate-wild-ignore-table 同replication-ignore-table功能一样，但是可以加通配符</p>
<p>原文:<a href="https://blog.51cto.com/yueyinsha/5243070" target="_blank" rel="noopener">MySQL 主从同步：同步相关信息的存储及查询</a></p>
<h1 id="主從同步故障排除"><a href="#主從同步故障排除" class="headerlink" title="主從同步故障排除"></a>主從同步故障排除</h1><p><a href="https://blog.longwin.com.tw/2013/09/mysql-replication-error-1236-fix-2013/" target="_blank" rel="noopener">https://blog.longwin.com.tw/2013/09/mysql-replication-error-1236-fix-2013/</a><br><a href="https://aws.amazon.com/cn/premiumsupport/knowledge-center/dms-cdc-error-1236-msql/" target="_blank" rel="noopener">https://aws.amazon.com/cn/premiumsupport/knowledge-center/dms-cdc-error-1236-msql/</a></p>
<h1 id="foreignkey-命名規則"><a href="#foreignkey-命名規則" class="headerlink" title="foreignkey 命名規則"></a>foreignkey 命名規則</h1><p>會注意到這個的原因是因為，資料庫報錯1022<br><a href="https://stackoverflow.com/questions/15014592/mysql-error-1022-when-creating-table" target="_blank" rel="noopener">https://stackoverflow.com/questions/15014592/mysql-error-1022-when-creating-table</a><br><a href="https://stackoverflow.com/questions/199498/foreign-key-naming-scheme" target="_blank" rel="noopener">https://stackoverflow.com/questions/199498/foreign-key-naming-scheme</a></p>
<h1 id="先join再查詢，先查詢再join"><a href="#先join再查詢，先查詢再join" class="headerlink" title="先join再查詢，先查詢再join"></a>先join再查詢，先查詢再join</h1><p>其實我們不知道DB的行為會是怎樣，所以一切都需要驗證之後才知道<br><a href="https://blog.csdn.net/qq_15329947/article/details/96482433" target="_blank" rel="noopener">https://blog.csdn.net/qq_15329947/article/details/96482433</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://dkchange.github.io/2020/03/06/laravel%E4%BD%BF%E7%94%A8eloquent/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Stanley Ke">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蛋粒個人網誌">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/06/laravel%E4%BD%BF%E7%94%A8eloquent/" class="post-title-link" itemprop="url">laravel使用eloquent</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2020-03-06 09:59:50" itemprop="dateCreated datePublished" datetime="2020-03-06T09:59:50+08:00">2020-03-06</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新於</span>
        <time title="修改時間：2023-04-19 07:52:52" itemprop="dateModified" datetime="2023-04-19T07:52:52+08:00">2023-04-19</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>eloquent是遵循 active record pattern  ，但你去要資料，違反了 tell dont ask 原則<br>doctrine是遵循 data mapper pattern</p>
<h1 id="表格的default-value"><a href="#表格的default-value" class="headerlink" title="表格的default value"></a>表格的default value</h1><p>在migration就設定default value</p>
<ul>
<li>-&gt;default($value)    Specify a “default” value for the column<br>或者<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ROLE_PUBLISHER = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span> $attributes = [</span><br><span class="line">    <span class="string">'role_id'</span> =&gt; <span class="keyword">self</span>::ROLE_PUBLISHER,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><a href="https://stackoverflow.com/questions/39912372/how-to-set-the-default-value-of-an-attribute-on-a-laravel-model" target="_blank" rel="noopener">https://stackoverflow.com/questions/39912372/how-to-set-the-default-value-of-an-attribute-on-a-laravel-model</a></p>
<h1 id="many-to-many-relationship"><a href="#many-to-many-relationship" class="headerlink" title="many to many relationship"></a>many to many relationship</h1><p><a href="https://www.youtube.com/watch?v=akKWC_vP7sE" target="_blank" rel="noopener">https://www.youtube.com/watch?v=akKWC_vP7sE</a></p>
<h1 id="fake-relationship"><a href="#fake-relationship" class="headerlink" title="fake relationship"></a>fake relationship</h1><p><a href="https://www.youtube.com/watch?v=rx1DQBE01b0" target="_blank" rel="noopener">https://www.youtube.com/watch?v=rx1DQBE01b0</a></p>
<h1 id="Laravel数据库操作的三种方式"><a href="#Laravel数据库操作的三种方式" class="headerlink" title="Laravel数据库操作的三种方式"></a>Laravel数据库操作的三种方式</h1><p><a href="https://www.youtube.com/watch?v=3TJfR1Ta4GU" target="_blank" rel="noopener">https://www.youtube.com/watch?v=3TJfR1Ta4GU</a></p>
<h1 id="laravel-配置MySQL讀寫分離"><a href="#laravel-配置MySQL讀寫分離" class="headerlink" title="laravel 配置MySQL讀寫分離"></a>laravel 配置MySQL讀寫分離</h1><p><a href="https://zhuanlan.zhihu.com/p/123092691" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/123092691</a></p>
<h1 id="model如何知道table的欄位"><a href="#model如何知道table的欄位" class="headerlink" title="model如何知道table的欄位"></a>model如何知道table的欄位</h1><p><a href="https://stackoverflow.com/questions/23396138/laravel-eloquent-model-attributes" target="_blank" rel="noopener">https://stackoverflow.com/questions/23396138/laravel-eloquent-model-attributes</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://dkchange.github.io/2020/02/21/%E8%9B%8B%E7%B2%92%E6%97%A5%E8%A8%98%E9%87%91%E5%8F%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Stanley Ke">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蛋粒個人網誌">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/21/%E8%9B%8B%E7%B2%92%E6%97%A5%E8%A8%98%E9%87%91%E5%8F%A5/" class="post-title-link" itemprop="url">蛋粒大兵日記</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2020-02-21 10:54:26" itemprop="dateCreated datePublished" datetime="2020-02-21T10:54:26+08:00">2020-02-21</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新於</span>
        <time title="修改時間：2021-07-30 18:17:40" itemprop="dateModified" datetime="2021-07-30T18:17:40+08:00">2021-07-30</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%97%A5%E8%A8%98/" itemprop="url" rel="index"><span itemprop="name">日記</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>今天在整理抽屜，發現當兵時的日記，紙頁已逐漸得殘破不堪，過了 6 年了吧<br>裏頭的語氣還是像中二小鬼一樣，列出幾個覺得有價值的句子就把這不堪的日記扔了吧<br>正因為笨所以用功要比別人多，做的要比別人多<br>為什麼鳥大便是白色的<br>每個人都應該要有努力的目標，為什麼努力，為誰努力，不想成為只會讓人墮落、傷心的人<br>你和我可以為這個國家做什麼?沒有人可以預見國家的未來，我們不是可以決定台灣方向的少數人，但是我們是可以改變台灣方向的一群人，你會願意做什麼讓國家往更好的方向走<br>我不想信民主自由的台灣，生活會有多痛苦<br>再過 100 天就可以擺脫次等公民的身份<br>黃榮彥問我說寫日記寫完會看嗎?說不定會吧!日記記錄我當兵的心情起伏、抱怨、思考模式、轉變、領悟、計畫、白日夢、光說不練的事<br>軍官要 15 年內當到少校才會有終身俸<br>國外漫遊要如何區分電信公司?頻率?電話?<br>人容易被情緒左右，收假前沒來由的情緒失落無力，大概是假日費太久，顯得什麼都沒有做<br>別再想要簽自願役，會扼殺掉自己的思想和進步空間，請努力往自己想成為的方向邁進<br>幫助別人最大的收穫是自己也會得到幫助<br>志豪和我都是屬於比較不喜歡叫別人做事的人，然而很多事情都是需要大家的分工，要改要改<br>0~99 分的人都有，領一樣的錢做一樣的事是誰會想要認真當兵<br>一層幹過一層，你以為他願意嗎?這樣被連帶懲處，軍官覺得被騙，阿兵覺得不甘願，現在還招的到人是因為正規生要簽 10 年，每年也都有人被騙 4 年，快改革吧，總不能每年都這樣騙</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="上一頁"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="下一頁"></i></a>
  </nav>



      

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

    </div>
  </main>

  <footer class="footer">
    <div class="footer-inner">
      

      

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Stanley Ke</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 強力驅動
  </div>

    </div>
  </footer>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.0/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  















  








  

  

</body>
</html>
