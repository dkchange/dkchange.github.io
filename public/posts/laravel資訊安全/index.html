<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>laravel資訊安全 | My New Hugo Site</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="前言
How your Laravel application can get hacked, and how to prevent that from happening by Antti Rössi
sql injection
如果你用DB::raw裡面直接用unsanitize過的參數，就可以看到整個DB
測試工具 sqlmap 幫你測試一段URL的所帶的參數有沒有機會SQL injection
object injection
測試工具 phpggc 一個生成序列化的工具，例如可以幫你把一段序列化之後的CODE塞進JPG檔，並生成出來
反序列化一個物件時，他是從字串轉成物件，當你從字串轉成物件時，就有機會被注入
舉個極端的例子
gadget : 利用
例子1:

https://kylingit.com/blog/%E7%94%B1phpggc%E7%90%86%E8%A7%A3php%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/
https://ithelp.ithome.com.tw/articles/10241555
public $arg = &#39;id&#39;;
public function __destruct(){//php會自動執行
    shell_exec($this-&gt;arg);
}
例子2:
phar 文件是一種打包格式，通過將許多PHP代碼文件和其他資源（例如圖像，樣式表等）捆綁到一個歸檔文件中來實現應用程式和庫的分發,受到Java的JAR文件格式的影響，，目的在於加快通過FTP部署應用程式的速度
phar在使用任何檔案相關的操作時(e.g. filesize())，會將資料反序列化
例子3:
當含有序列化code的圖片被傳至server時，server去讀它的filesize就會有被駭的風險
laravel漏洞
CVE-2021-39165 从一个Laravel SQL注入漏洞开始的Bug Bounty之旅">
    <meta name="generator" content="Hugo 0.152.2">
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >




    


    
      

    

    

    
      <link rel="canonical" href="http://localhost:1313/posts/laravel%E8%B3%87%E8%A8%8A%E5%AE%89%E5%85%A8/">
    

    <meta property="og:url" content="http://localhost:1313/posts/laravel%E8%B3%87%E8%A8%8A%E5%AE%89%E5%85%A8/">
  <meta property="og:site_name" content="My New Hugo Site">
  <meta property="og:title" content="laravel資訊安全">
  <meta property="og:description" content="前言 How your Laravel application can get hacked, and how to prevent that from happening by Antti Rössi
sql injection 如果你用DB::raw裡面直接用unsanitize過的參數，就可以看到整個DB 測試工具 sqlmap 幫你測試一段URL的所帶的參數有沒有機會SQL injection
object injection 測試工具 phpggc 一個生成序列化的工具，例如可以幫你把一段序列化之後的CODE塞進JPG檔，並生成出來 反序列化一個物件時，他是從字串轉成物件，當你從字串轉成物件時，就有機會被注入 舉個極端的例子
gadget : 利用 例子1:
https://kylingit.com/blog/%E7%94%B1phpggc%E7%90%86%E8%A7%A3php%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/ https://ithelp.ithome.com.tw/articles/10241555 public $arg = &#39;id&#39;; public function __destruct(){//php會自動執行 shell_exec($this-&gt;arg); } 例子2: phar 文件是一種打包格式，通過將許多PHP代碼文件和其他資源（例如圖像，樣式表等）捆綁到一個歸檔文件中來實現應用程式和庫的分發,受到Java的JAR文件格式的影響，，目的在於加快通過FTP部署應用程式的速度 phar在使用任何檔案相關的操作時(e.g. filesize())，會將資料反序列化
例子3: 當含有序列化code的圖片被傳至server時，server去讀它的filesize就會有被駭的風險
laravel漏洞 CVE-2021-39165 从一个Laravel SQL注入漏洞开始的Bug Bounty之旅">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2021-12-30T10:24:05+00:00">
    <meta property="article:modified_time" content="2021-12-30T10:24:05+00:00">

  <meta itemprop="name" content="laravel資訊安全">
  <meta itemprop="description" content="前言 How your Laravel application can get hacked, and how to prevent that from happening by Antti Rössi
sql injection 如果你用DB::raw裡面直接用unsanitize過的參數，就可以看到整個DB 測試工具 sqlmap 幫你測試一段URL的所帶的參數有沒有機會SQL injection
object injection 測試工具 phpggc 一個生成序列化的工具，例如可以幫你把一段序列化之後的CODE塞進JPG檔，並生成出來 反序列化一個物件時，他是從字串轉成物件，當你從字串轉成物件時，就有機會被注入 舉個極端的例子
gadget : 利用 例子1:
https://kylingit.com/blog/%E7%94%B1phpggc%E7%90%86%E8%A7%A3php%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/ https://ithelp.ithome.com.tw/articles/10241555 public $arg = &#39;id&#39;; public function __destruct(){//php會自動執行 shell_exec($this-&gt;arg); } 例子2: phar 文件是一種打包格式，通過將許多PHP代碼文件和其他資源（例如圖像，樣式表等）捆綁到一個歸檔文件中來實現應用程式和庫的分發,受到Java的JAR文件格式的影響，，目的在於加快通過FTP部署應用程式的速度 phar在使用任何檔案相關的操作時(e.g. filesize())，會將資料反序列化
例子3: 當含有序列化code的圖片被傳至server時，server去讀它的filesize就會有被駭的風險
laravel漏洞 CVE-2021-39165 从一个Laravel SQL注入漏洞开始的Bug Bounty之旅">
  <meta itemprop="datePublished" content="2021-12-30T10:24:05+00:00">
  <meta itemprop="dateModified" content="2021-12-30T10:24:05+00:00">
  <meta itemprop="wordCount" content="59">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="laravel資訊安全">
  <meta name="twitter:description" content="前言 How your Laravel application can get hacked, and how to prevent that from happening by Antti Rössi
sql injection 如果你用DB::raw裡面直接用unsanitize過的參數，就可以看到整個DB 測試工具 sqlmap 幫你測試一段URL的所帶的參數有沒有機會SQL injection
object injection 測試工具 phpggc 一個生成序列化的工具，例如可以幫你把一段序列化之後的CODE塞進JPG檔，並生成出來 反序列化一個物件時，他是從字串轉成物件，當你從字串轉成物件時，就有機會被注入 舉個極端的例子
gadget : 利用 例子1:
https://kylingit.com/blog/%E7%94%B1phpggc%E7%90%86%E8%A7%A3php%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/ https://ithelp.ithome.com.tw/articles/10241555 public $arg = &#39;id&#39;; public function __destruct(){//php會自動執行 shell_exec($this-&gt;arg); } 例子2: phar 文件是一種打包格式，通過將許多PHP代碼文件和其他資源（例如圖像，樣式表等）捆綁到一個歸檔文件中來實現應用程式和庫的分發,受到Java的JAR文件格式的影響，，目的在於加快通過FTP部署應用程式的速度 phar在使用任何檔案相關的操作時(e.g. filesize())，會將資料反序列化
例子3: 當含有序列化code的圖片被傳至server時，server去讀它的filesize就會有被駭的風險
laravel漏洞 CVE-2021-39165 从一个Laravel SQL注入漏洞开始的Bug Bounty之旅">

	
  </head><body class="ma0 avenir bg-near-white development">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l center items-center justify-between">
    <a href="/" class="f3 fw2 hover-white white-90 dib no-underline">
      
        My New Hugo Site
      
    </a>
    <div class="flex-l items-center">
      

      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  
  <article class="flex-l mw8 center ph3 flex-wrap justify-between">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside><div id="sharing" class="mt3 ananke-socials"></div>
<h1 class="f1 athelas mt3 mb1">laravel資訊安全</h1>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2021-12-30T10:24:05Z">December 30, 2021</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><h1 id="前言">前言</h1>
<p><a href="https://www.youtube.com/watch?v=kKGGVGiq2y8">How your Laravel application can get hacked, and how to prevent that from happening by Antti Rössi</a></p>
<h1 id="sql-injection">sql injection</h1>
<p>如果你用DB::raw裡面直接用unsanitize過的參數，就可以看到整個DB
測試工具 sqlmap 幫你測試一段URL的所帶的參數有沒有機會SQL injection</p>
<h1 id="object-injection">object injection</h1>
<p>測試工具 phpggc 一個生成序列化的工具，例如可以幫你把一段序列化之後的CODE塞進JPG檔，並生成出來
反序列化一個物件時，他是從字串轉成物件，當你從字串轉成物件時，就有機會被注入
舉個極端的例子<br>
gadget : 利用
例子1:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">https</span><span style="color:#f92672">://</span><span style="color:#a6e22e">kylingit</span><span style="color:#f92672">.</span><span style="color:#a6e22e">com</span><span style="color:#f92672">/</span><span style="color:#a6e22e">blog</span><span style="color:#f92672">/%</span><span style="color:#a6e22e">E7</span><span style="color:#f92672">%</span><span style="color:#ae81ff">94</span><span style="color:#f92672">%</span><span style="color:#a6e22e">B1phpggc</span><span style="color:#f92672">%</span><span style="color:#a6e22e">E7</span><span style="color:#f92672">%</span><span style="color:#ae81ff">90</span><span style="color:#f92672">%</span><span style="color:#ae81ff">86</span><span style="color:#f92672">%</span><span style="color:#a6e22e">E8</span><span style="color:#f92672">%</span><span style="color:#a6e22e">A7</span><span style="color:#f92672">%</span><span style="color:#a6e22e">A3php</span><span style="color:#f92672">%</span><span style="color:#a6e22e">E5</span><span style="color:#f92672">%</span><span style="color:#ae81ff">8</span><span style="color:#a6e22e">F</span><span style="color:#f92672">%</span><span style="color:#ae81ff">8</span><span style="color:#a6e22e">D</span><span style="color:#f92672">%</span><span style="color:#a6e22e">E5</span><span style="color:#f92672">%</span><span style="color:#a6e22e">BA</span><span style="color:#f92672">%</span><span style="color:#ae81ff">8</span><span style="color:#a6e22e">F</span><span style="color:#f92672">%</span><span style="color:#a6e22e">E5</span><span style="color:#f92672">%</span><span style="color:#ae81ff">88</span><span style="color:#f92672">%</span><span style="color:#ae81ff">97</span><span style="color:#f92672">%</span><span style="color:#a6e22e">E5</span><span style="color:#f92672">%</span><span style="color:#ae81ff">8</span><span style="color:#a6e22e">C</span><span style="color:#f92672">%</span><span style="color:#ae81ff">96</span><span style="color:#f92672">%</span><span style="color:#a6e22e">E6</span><span style="color:#f92672">%</span><span style="color:#a6e22e">BC</span><span style="color:#f92672">%</span><span style="color:#ae81ff">8</span><span style="color:#a6e22e">F</span><span style="color:#f92672">%</span><span style="color:#a6e22e">E6</span><span style="color:#f92672">%</span><span style="color:#a6e22e">B4</span><span style="color:#f92672">%</span><span style="color:#ae81ff">9</span><span style="color:#a6e22e">E</span><span style="color:#f92672">/</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">https</span><span style="color:#f92672">://</span><span style="color:#a6e22e">ithelp</span><span style="color:#f92672">.</span><span style="color:#a6e22e">ithome</span><span style="color:#f92672">.</span><span style="color:#a6e22e">com</span><span style="color:#f92672">.</span><span style="color:#a6e22e">tw</span><span style="color:#f92672">/</span><span style="color:#a6e22e">articles</span><span style="color:#f92672">/</span><span style="color:#ae81ff">10241555</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> $arg <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;id&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">__destruct</span>(){<span style="color:#75715e">//php會自動執行
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">shell_exec</span>($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">arg</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>例子2:
phar 文件是一種打包格式，通過將許多PHP代碼文件和其他資源（例如圖像，樣式表等）捆綁到一個歸檔文件中來實現應用程式和庫的分發,受到Java的JAR文件格式的影響，，目的在於加快通過FTP部署應用程式的速度
phar在使用任何檔案相關的操作時(e.g. filesize())，會將資料反序列化</p>
<p>例子3:
當含有序列化code的圖片被傳至server時，server去讀它的filesize就會有被駭的風險</p>
<h1 id="laravel漏洞">laravel漏洞</h1>
<p><a href="https://www.leavesongs.com/PENETRATION/cachet-from-laravel-sqli-to-bug-bounty.html">CVE-2021-39165 从一个Laravel SQL注入漏洞开始的Bug Bounty之旅</a></p>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white white-70 dn dib-ns pv2 ph3 no-underline" href="http://localhost:1313/" >
    &copy;  My New Hugo Site 2025 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
