<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>My New Hugo Site</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.152.2">
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >




    


    
      

    

    
    
      <link href="/posts/index.xml" rel="alternate" type="application/rss+xml" title="My New Hugo Site" />
      <link href="/posts/index.xml" rel="feed" type="application/rss+xml" title="My New Hugo Site" />
      
    

    
      <link rel="canonical" href="http://localhost:1313/posts/">
    

    <meta property="og:url" content="http://localhost:1313/posts/">
  <meta property="og:site_name" content="My New Hugo Site">
  <meta property="og:title" content="Posts">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="website">

  <meta itemprop="name" content="Posts">
  <meta itemprop="datePublished" content="2025-04-11T16:41:12+00:00">
  <meta itemprop="dateModified" content="2025-11-12T12:47:49+00:00">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Posts">

	
  </head><body class="ma0 avenir bg-near-white development">

    

  <header>
    <div class="pb3-m pb6-l bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l center items-center justify-between">
    <a href="/" class="f3 fw2 hover-white white-90 dib no-underline">
      
        My New Hugo Site
      
    </a>
    <div class="flex-l items-center">
      

      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

      <div class="tc-l pv3 ph3 ph4-ns">
        <h1 class="f2 f-subheadline-l fw2 light-silver mb0 lh-title">
          Posts
        </h1>
        
      </div>
    </div>
  </header>


    <main class="pb7" role="main">
      
  <article class="pa3 pa4-ns nested-copy-line-height">
    <section class="cf ph3 ph5-l pv3 pv4-l f4 tc-l center measure-wide lh-copy nested-links mid-gray"></section>
    <section class="flex-ns mt5 flex-wrap justify-around">
      
        <div class="w-100 w-30-l mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/%E8%9B%8B%E7%B2%92%E6%97%A5%E8%A8%98%E9%87%91%E5%8F%A5/" class="link black dim">
        蛋粒大兵日記
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>今天在整理抽屜，發現當兵時的日記，紙頁已逐漸得殘破不堪，過了 6 年了吧
裏頭的語氣還是像中二小鬼一樣，列出幾個覺得有價值的句子就把這不堪的日記扔了吧
正因為笨所以用功要比別人多，做的要比別人多
為什麼鳥大便是白色的
每個人都應該要有努力的目標，為什麼努力，為誰努力，不想成為只會讓人墮落、傷心的人
你和我可以為這個國家做什麼?沒有人可以預見國家的未來，我們不是可以決定台灣方向的少數人，但是我們是可以改變台灣方向的一群人，你會願意做什麼讓國家往更好的方向走
我不想信民主自由的台灣，生活會有多痛苦
再過 100 天就可以擺脫次等公民的身份
黃榮彥問我說寫日記寫完會看嗎?說不定會吧!日記記錄我當兵的心情起伏、抱怨、思考模式、轉變、領悟、計畫、白日夢、光說不練的事
軍官要 15 年內當到少校才會有終身俸
國外漫遊要如何區分電信公司?頻率?電話?
人容易被情緒左右，收假前沒來由的情緒失落無力，大概是假日費太久，顯得什麼都沒有做
別再想要簽自願役，會扼殺掉自己的思想和進步空間，請努力往自己想成為的方向邁進
幫助別人最大的收穫是自己也會得到幫助
志豪和我都是屬於比較不喜歡叫別人做事的人，然而很多事情都是需要大家的分工，要改要改
0~99 分的人都有，領一樣的錢做一樣的事是誰會想要認真當兵
一層幹過一層，你以為他願意嗎?這樣被連帶懲處，軍官覺得被騙，阿兵覺得不甘願，現在還招的到人是因為正規生要簽 10 年，每年也都有人被騙 4 年，快改革吧，總不能每年都這樣騙</p>
    </div>
    <a href="/posts/%E8%9B%8B%E7%B2%92%E6%97%A5%E8%A8%98%E9%87%91%E5%8F%A5/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/laravel%E4%BD%BF%E7%94%A8socialite/" class="link black dim">
        laravel使用Socialite
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <h1 id="前言">前言</h1>
<pre><code>因為你如果不用第三方登入，沒有人要輸入帳密給新網站，會有安全疑慮
</code></pre>
<h1 id="注意">注意</h1>
<p>以github為例，如果你申請時填的是localhost， 記得本機上就不要用127.0.0.1來登入了，要不然會</p>
<p><a href="https://stackoverflow.com/questions/30660847/laravel-socialite-invalidstateexception">Laravel Socialite: InvalidStateException</a>
![github申請oAuth畫面]](/images/github申請oAuth畫面.PNG)</p>
    </div>
    <a href="/posts/laravel%E4%BD%BF%E7%94%A8socialite/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/%E4%BD%BF%E7%94%A8drone/" class="link black dim">
        使用Drone
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <h1 id="前言">前言</h1>
<p>對於現代化的開發來說，你想要達到的自動化是什麼？最好是我 code 提交上去之後，一切都成功的佈署好，中間的過程有
代碼提交
代碼測試
代碼審核
代碼合併
代碼佈署
環境建制
代碼編譯</p>
<p>那這中間的過程，如果沒有導入 ci\cd 我們原本是怎麼做的？
git 提交
ftp 手動上傳 10 台？
代碼測試
每一台環境手動重新安裝？
在不同環境下不同指令編譯
寫許多腳本來環境安裝</p>
<p>太多名詞在網路上飛， 基於<strong>沒用過至少也要聽過</strong>，為了跟得上時代，有些東西還是免不了，這篇整理自
<a href="https://ithelp.ithome.com.tw/users/20120491/ironman/2538">就是「懶」才更需要重視 DevOps</a>
<a href="https://ithelp.ithome.com.tw/users/20107551/ironman/1906">從零開始建立自動化發佈的流水線</a>
<a href="https://medium.com/asiayo-engineering/%E7%94%A8-drone-%E6%89%93%E9%80%A0-ci-cd-flow-36b9d14c7620">用 Drone 打造 CI/CD flow</a>
的讀後感心得，特別推 <strong>從零開始建立自動化發佈的流水線</strong></p>
<h1 id="play-with-docker">play with docker</h1>
<p><a href="https://labs.play-with-docker.com/">https://labs.play-with-docker.com/</a>
可以免費玩 docker 4hr 的服務</p>
<h1 id="何謂-devops">何謂 DevOps</h1>
<p><strong>開發</strong> 與 <strong>維運</strong> 融會貫通後的一種技術能力體現
只是，時間終究有限，需要 「自動化」 協助「DevOps」人員
是現代敏捷開發所秉持的精神</p>
<h1 id="版本控制系統-version-control-system-vcs">版本控制系統( Version Control System, VCS)</h1>
<p>大致上分為兩種類型，集中式與分散式
代表案例：
Subversion 就是集中式版本控制系統
<strong>Git</strong>、Mercurial 則是分散式版本控制系統。</p>
<p>品牌認識:GitHub、BitBucket、Azure DevOps、GitLab</p>
<h1 id="git-開發流程工作流程">git 開發流程（工作流程）</h1>
<p>團隊合作如何避免衝突、覆蓋，分支如何合併等等的工作流程。
團隊間可以自行協調出工作流程或是根據知名的規範走
規範認識:git flow、Github flow、Gitlab flow</p>
    </div>
    <a href="/posts/%E4%BD%BF%E7%94%A8drone/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/%E5%AE%89%E8%A3%9D%E7%92%B0%E5%A2%83/" class="link black dim">
        安裝環境
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <h1 id="前言">前言</h1>
<p>事情是這樣子的，以前從 windows 環境就安裝 AppServ、WampServer、Xampp 這種快速安裝的安裝包，為什麼呢?
因為最後環境還是會在 linux 上，所以 windows 上能開發就好，也就不用太講究了，因為有些包在 linux 沒問題，在 windows 會出事，
心血來潮試著自己安裝一次看看</p>
<h1 id="名詞解釋">名詞解釋</h1>
<ul>
<li>
<p>X86 X32
我們要安裝 PHP 時就會看到一些不懂的名詞
x86 等於 32 位元
X64 等於 64 位元
為何這樣奇怪的命名就是歷史因素了</p>
</li>
<li>
<p>Thread Safe</p>
</li>
<li>
<p>None Thread Safe
線程安全和非線程安全，這就牽扯到比較複雜的因素了，有時間看看https://www.awaimai.com/88.html
阿因為我們開發機，先不考慮線程安全和效能，任 1 種皆可</p>
</li>
</ul>
<h1 id="phpini-時區設定的問題">php.ini 時區設定的問題</h1>
<p>如果你是跑 php-fpm 那設定在/etc/php.ini 的時區你會吃不到，此時就要跑去
/etc/php-fpm.d/www.conf 加上</p>
<pre tabindex="0"><code class="language-conf" data-lang="conf">php_admin_value[date.timezone] = Europe/Berlin
</code></pre><h1 id="遭遇問題">遭遇問題</h1>
<p>今天打開 Xampp 試著開啟 mysql 服務的時候，程序出錯
Error: MySQL shutdown unexpectedly.</p>
<p>打開日誌看不出個什麼鬼，只知道突然中斷
日誌都是正常的紀錄
然後就開始爬文
<a href="https://blog.csdn.net/yuer_xiao/article/details/79236719">https://blog.csdn.net/yuer_xiao/article/details/79236719</a></p>
<pre><code>在mysql/bin/my.ini 文件 加一个：
[mysqld]
innodb_force_recovery = 4
</code></pre>
<p>失敗</p>
    </div>
    <a href="/posts/%E5%AE%89%E8%A3%9D%E7%92%B0%E5%A2%83/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/%E4%BD%BF%E7%94%A8git/" class="link black dim">
        使用git
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <h1 id="前言">前言</h1>
<p>版本控制在開發過程占很重要的地位，那團隊裡該如何多人協作?整個專案管理的流程應該要怎樣才不會一天到晚衝突，功能互蓋?
參考：為你自己學 git <a href="https://gitbook.tw/">https://gitbook.tw/</a> 非常推荐，基本上工作需要的东西在<strong>為你自己學 git</strong>都可以找到解答
<a href="https://zlargon.gitbooks.io/git-tutorial/content/file/ignore.html">https://zlargon.gitbooks.io/git-tutorial/content/file/ignore.html</a>
<a href="https://zlargon.gitbooks.io/git-tutorial/content/file/recover.html">https://zlargon.gitbooks.io/git-tutorial/content/file/recover.html</a></p>
<h1 id="約定俗成">約定俗成</h1>
<p>請儘量不要在已經 Push 出去之後再修改提交，否則可能會造成其它人的困擾
Git 在計算、產生物件的時候，是根據「檔案的內容」去做計算的，所以光是新增一個目錄，Git 是沒辦法處理它的。慣例上可以放一個名為 “.keep” 或 “.gitkeep” 的空檔案，讓 Git 能「感應」到這個目錄的存在</p>
<p>切好每一次的功能，有空就提交，但前提示提交的 code 都是可以 work 的，獨立且可正常運作的 code</p>
<h1 id="免帳密-ssh-key-登入">免帳密 ssh key 登入</h1>
<p><a href="https://aben20807.blogspot.com/2018/03/1070302-git-push-ssh-key.html">https://aben20807.blogspot.com/2018/03/1070302-git-push-ssh-key.html</a></p>
<h1 id="git-基本指令">git 基本指令</h1>
<h2 id="git-init">git init</h2>
<h2 id="git-status">git status</h2>
<h2 id="git-add">git add</h2>
<p>檔案放到暫存區（Staging Area）</p>
<pre><code>$ git add *.html
</code></pre>
<h2 id="git-commit">git commit</h2>
<p>把暫存區的東西存放到儲存庫（Repository）裡</p>
<h3 id="使用情境">使用情境</h3>
<p>能增加新 add 到暫存區的檔案，和修改提交訊息，但只能修改前一次的提交
$git commit &ndash;amend -m &ldquo;Welcome To Facebook&rdquo;</p>
<h2 id="git-log">git log</h2>
<p>只 show 一行資訊和版本路線
$ git log &ndash;oneline &ndash;graph</p>
<h3 id="使用情境-1">使用情境</h3>
<p>找某個人或某些人的 Commit
<a href="https://gitbook.tw/chapters/using-git/log.html">https://gitbook.tw/chapters/using-git/log.html</a>
特定檔案的 Commit 紀錄
$ git log welcome.html
詳細內容
$ git log -p welcome.html</p>
    </div>
    <a href="/posts/%E4%BD%BF%E7%94%A8git/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/laravel%E4%BD%BF%E7%94%A8phpunit/" class="link black dim">
        laravel使用PHPunit
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <h1 id="前言">前言</h1>
<p>TDD測試驅動開發，因為測試是自己寫的，所以不會預料到特殊情況，例如你使用者輸入什麼會發生的錯,或是某個時間點會發生的錯，能做的是就是確保程式寫大之後，東改西改<em><strong>某個流程</strong></em>不會壞掉，所以就來寫測試吧</p>
<h1 id="設定">設定</h1>
<p>如果你有裝Telescope會報錯，在<code>phpunit.xml</code>作修改，那這個檔案時就是PHPunit執行的環境，在上面的修改實際上會覆蓋.env，然後我們希望每次執行測時都是全新的環境，所以也要修改DB的設定檔</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;php&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;server</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;TELESCOPE_ENABLED&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;false&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;server</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;DB_CONNECTION&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;sqlite&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;server</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;DB_DATABASE&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;:memory:&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/php&gt;</span>
</span></span></code></pre></div><h1 id="執行">執行</h1>
<p>執行vender底下的執行檔，綠燈代表成功</p>
<pre><code>vendor/bin/phpunit
vendor/bin/phpunit --filter only_logged_in_user_can_edit_profile
vendor/bin/phpunit --filter UsersTest
vendor/bin/phpunit --unit UsersTest
//清除畫面
clear &amp;&amp; !!
那因為每次都需要打那長的指令會覺得麻煩，所以將這個指令取一個別名
alias pu = 'clear &amp;&amp; vendor/bin/phpunit'
alias pf = 'clear &amp;&amp; vendor/bin/phpunit --filter'
設定完之後就會在~./zhsrc看到我們的設定
那在windows底下可能就和我預期的不一樣
每次重開終端機CMD都需要再重打一次上述指令
我們可以新增一個.bash_profile檔案，裡面放著
alias pu = 'clear &amp;&amp; vendor/bin/phpunit'
alias pf = 'clear &amp;&amp; vendor/bin/phpunit --filter'
那在要使用別名之前，我們就先
source ~/.bash_profile
就可以使用了
</code></pre>
<h1 id="撰寫">撰寫</h1>
<pre><code>php artisan make:test BirthdayTest
</code></pre>
<p><code>tests\Feature</code>資料夾底下建立我們功能檔案，我們通常會對一個controller作撰寫，一個controller對應一個功能，而且是同步進行，<em><strong>編寫程式就要編寫測試</strong></em>了，因為寫程式的當下你才會考慮到可能情況，之前有寫工廠factory這就可以派上用場，每個function名稱都要一目瞭然，名字再長也沒關係，e.g.,only_logged_in_user_can_edit_profile
<code>tests\Unit</code>資料夾底下建立我們功能檔案，我們通常會對一個model作撰寫，unit與feature的差別是，feature包含了對使用者UI互動的測試，例如網頁會轉跳到哪裡的驗證</p>
<h2 id="常用的方法">常用的方法</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#75715e">//這一行會幫我們migrate，爾且清空
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">use</span> <span style="color:#a6e22e">RefreshDatabase</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e">//所有function運行前都會先做放在裡面的邏輯，
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">setUp</span>()<span style="color:#f92672">:</span><span style="color:#a6e22e">void</span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">parent</span><span style="color:#f92672">::</span><span style="color:#a6e22e">setUp</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Event</span><span style="color:#f92672">::</span><span style="color:#a6e22e">fake</span>();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//only_logged_in_user_can_edit_profile
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>$response <span style="color:#f92672">=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;/edit&#39;</span>)<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">assertRedirect</span>(<span style="color:#e6db74">&#39;login&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//only_authenticate_users_can_edit_profile
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>$this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">actingAs</span>(<span style="color:#a6e22e">factory</span>(<span style="color:#a6e22e">User</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>)<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">create</span>());
</span></span><span style="display:flex;"><span>$response <span style="color:#f92672">=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;/edit&#39;</span>)<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">assertOk</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//an_user_added_through_the_form
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//laravel內建http錯誤碼處理關掉，看真正的報錯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>$this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">withoutExceptionHanding</span>();
</span></span><span style="display:flex;"><span><span style="color:#75715e">//忽略Event
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">Event</span><span style="color:#f92672">::</span><span style="color:#a6e22e">fake</span>();
</span></span><span style="display:flex;"><span>$this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">actingAs</span>(<span style="color:#a6e22e">factory</span>(<span style="color:#a6e22e">User</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>)<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">create</span>(
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;email&#39;</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;admin@admin.com&#39;</span>
</span></span><span style="display:flex;"><span>));
</span></span><span style="display:flex;"><span>$this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">post</span>(<span style="color:#e6db74">&#39;/add&#39;</span>,[
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;name&#39;</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;test user&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;email&#39;</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;test@test.com&#39;</span>
</span></span><span style="display:flex;"><span>]);
</span></span><span style="display:flex;"><span>$this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">assertCount</span>(<span style="color:#ae81ff">1</span>,<span style="color:#a6e22e">User</span><span style="color:#f92672">::</span><span style="color:#a6e22e">all</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//an_email_is_required
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>$response <span style="color:#f92672">=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">post</span>(<span style="color:#e6db74">&#39;add&#39;</span>,<span style="color:#a6e22e">array_merge</span>($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">data</span>(),[
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;email&#39;</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>]));
</span></span></code></pre></div><h1 id="使用情境">使用情境</h1>
<h2 id="圖片測試">圖片測試</h2>
<p>Q:How to create a phpUnit test for images?
A:I&rsquo;d prefer not to test such things
<a href="https://stackoverflow.com/questions/39041876/how-to-create-a-phpunit-test-for-images">https://stackoverflow.com/questions/39041876/how-to-create-a-phpunit-test-for-images</a></p>
    </div>
    <a href="/posts/laravel%E4%BD%BF%E7%94%A8phpunit/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/laravel%E4%BD%BF%E7%94%A8%E4%BA%8B%E4%BB%B6%E5%92%8C%E7%9B%A3%E8%81%BD/" class="link black dim">
        laravel使用事件和監聽
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <h1 id="前言">前言</h1>
<p>使用場景這樣的，有的時候controller使用者註冊完之後，除了要發信件給管理者，還有發LINE訊息給管理者，這些眾多需要做的事都塞在controller會讓controller很雜亂，整個不隸屬與該controller的兩件事，寫同一個controller裡面也不對，萬一很多地方要用到呢?</p>
<h1 id="創建事件建和監聽">創建事件建和監聽</h1>
<p>php artisan make:event NewCustomerHasRegisteredEvent</p>
<p><code>app\Events\NewCustomerHasRegisteredEvent.php</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>   <span style="color:#66d9ef">public</span> $coustmer;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">__construct</span>($coustmer)
</span></span><span style="display:flex;"><span>   {
</span></span><span style="display:flex;"><span>       $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">customer</span> <span style="color:#f92672">=</span> $coustmer;
</span></span><span style="display:flex;"><span>   }
</span></span></code></pre></div><p>php artisan make:listener WelcomeNewCustomer</p>
<p><code>app\Listeners\WelcomeNewCustomer.php</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>   <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">handle</span>($event)
</span></span><span style="display:flex;"><span>   {
</span></span><span style="display:flex;"><span>       <span style="color:#a6e22e">sleep</span>(<span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span>       <span style="color:#a6e22e">Mail</span><span style="color:#f92672">::</span><span style="color:#a6e22e">to</span>($event<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">customer</span><span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">email</span>)<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">send</span>(<span style="color:#66d9ef">new</span> <span style="color:#a6e22e">WelcomeNewUserMail</span>());
</span></span><span style="display:flex;"><span>   }
</span></span></code></pre></div><h1 id="註冊此事件監聽">註冊此事件監聽</h1>
<p><code>/app/Providers/EventServiceProvider.php</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>     <span style="color:#66d9ef">protected</span> $listen <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">NewCustomerHasRegisteredEvent</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span> <span style="color:#f92672">=&gt;</span> [
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">\App\Listeners\WelcomeNewCustomerListener</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>,
</span></span><span style="display:flex;"><span>        ],
</span></span><span style="display:flex;"><span>    ];
</span></span></code></pre></div><p>在這裡有一個方便的點就是，如果$listen陣列內容填的是全路徑的話
直接</p>
<pre><code>php artisan event:ganerate
</code></pre>
<p>就可以產生下面兩個檔案了，完全不用分別創建事件和監聽，如果事件和監聽很多的話，少打不少指令</p>
<p><code>app\Events\NewCustomerHasRegisteredEvent.php</code>
<code>app\Listeners\WelcomeNewCustomer.php</code></p>
<h1 id="觸發事件">觸發事件</h1>
<p>在要使用的controller裡面添加</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#a6e22e">event</span>(<span style="color:#66d9ef">new</span> <span style="color:#a6e22e">NewCustomerHasRegisteredEvent</span>($customer));
</span></span></code></pre></div><h1 id="queues">Queues</h1>
<p>有的時候事件的服務要經過很久才會有回應，總不能讓使用者等10秒以上吧，laravel有解決方法。話說PHP又沒有異步機制，要異步的話必須要靠別的線程?laravel如何實現呢?看樣子是利用排程去做
異步要依靠列隊</p>
<p><code>.env</code>
QUEUE_CONNECTION=database
<code>app\Listeners\WelcomeNewCustomer.php</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">WelcomeNewCustomerListener</span> <span style="color:#66d9ef">implements</span> <span style="color:#a6e22e">ShouldQueue</span>
</span></span></code></pre></div><pre><code>php artisan queue:table
php artisan migrate
php artisan queue:work
要在背景執行的話在後面加上sapce+&amp;

php artisan queue:work &amp;
列出執行中的排程

jobs -l 
要儲存log的話

php artisan queue:work &gt; storage/logs/jobs.log &amp;
</code></pre>
<p>排程執行失敗要怎麼知道?
這時候就要加個工具叫做supervisor排程關掉時他會替你重開</p>
    </div>
    <a href="/posts/laravel%E4%BD%BF%E7%94%A8%E4%BA%8B%E4%BB%B6%E5%92%8C%E7%9B%A3%E8%81%BD/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/laravel%E4%BD%BF%E7%94%A8middleware/" class="link black dim">
        laravel使用middleware
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <h1 id="前言">前言</h1>
<p>laravel middleware用於驗證登入方面，請見{% post_link laravel會員登入配置 會員登入配置 %}</p>
<h1 id="創建middleware">創建middleware</h1>
<p>php artisan make:middleware AdminMiddleware</p>
<h1 id="使用方法">使用方法</h1>
<h2 id="文件介紹">文件介紹</h2>
<p><code>app\Http\Kernel.php</code>屬性介紹
每個請求都要經過註冊在***$middleware***裡面的middleware</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> $middleware <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">\App\Http\Middleware\CheckForMaintenanceMode</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">\Illuminate\Foundation\Http\Middleware\ValidatePostSize</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">\App\Http\Middleware\TrimStrings</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">\App\Http\Middleware\TrustProxies</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>,
</span></span><span style="display:flex;"><span>    ];
</span></span></code></pre></div><p>註冊在***$middlewareGroups***裡面的middleware會被應用至該路由，例如下面幾個middleware都會被應用至web.php裡面的路由</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;web&#39;</span> <span style="color:#f92672">=&gt;</span> [
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">\App\Http\Middleware\EncryptCookies</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">\Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">\Illuminate\Session\Middleware\StartSession</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// \Illuminate\Session\Middleware\AuthenticateSession::class,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">\Illuminate\View\Middleware\ShareErrorsFromSession</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">\App\Http\Middleware\VerifyCsrfToken</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">\Illuminate\Routing\Middleware\SubstituteBindings</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>,
</span></span><span style="display:flex;"><span>        ],
</span></span></code></pre></div><p>註冊在$routeMiddleware並給名字的話可以給route用，不註冊的話就要寫全部路徑</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> $routeMiddleware <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;admin.auth&#39;</span><span style="color:#f92672">=&gt;</span><span style="color:#a6e22e">\App\Http\Middleware\AdminMiddleware</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>,
</span></span><span style="display:flex;"><span>    ];
</span></span></code></pre></div><h2 id="使用方法-1">使用方法</h2>
<p>以下為中間件的食用方式，添加在建構子，或是個別路由
<code>Controllers\Admin\LoginController.php</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">__construct</span>()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//必須要略過登陸頁路由，因為我們需要給未登入的人用爾且我們驗證失敗會倒到這裡，會形成無窮迴圈
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//必須要略過登陸驗證路由，因為我們需要給未登入的人用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">middleware</span>(<span style="color:#e6db74">&#39;admin.auth&#39;</span>)<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">except</span>([<span style="color:#e6db74">&#39;loginForm&#39;</span>,<span style="color:#e6db74">&#39;login&#39;</span>]);
</span></span><span style="display:flex;"><span>    }  
</span></span></code></pre></div><p><code>web.php</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>    <span style="color:#a6e22e">Route</span><span style="color:#f92672">::</span><span style="color:#a6e22e">group</span>([<span style="color:#e6db74">&#39;namespace&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;Admin&#39;</span>], <span style="color:#66d9ef">function</span> () {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Route</span><span style="color:#f92672">::</span><span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;/&#39;</span>,<span style="color:#e6db74">&#39;LoginController@loginForm&#39;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Route</span><span style="color:#f92672">::</span><span style="color:#a6e22e">Post</span>(<span style="color:#e6db74">&#39;/login&#39;</span>,<span style="color:#e6db74">&#39;LoginController@login&#39;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Route</span><span style="color:#f92672">::</span><span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;/home&#39;</span>,<span style="color:#e6db74">&#39;LoginController@home&#39;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Route</span><span style="color:#f92672">::</span><span style="color:#a6e22e">post</span>(<span style="color:#e6db74">&#39;/logout&#39;</span>,<span style="color:#e6db74">&#39;LoginController@logout&#39;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Route</span><span style="color:#f92672">::</span><span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;/resetPassword&#39;</span>,<span style="color:#e6db74">&#39;ProfileController@resetPasswordForm&#39;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Route</span><span style="color:#f92672">::</span><span style="color:#a6e22e">post</span>(<span style="color:#e6db74">&#39;/resetPassword&#39;</span>,<span style="color:#e6db74">&#39;ProfileController@resetPassword&#39;</span>);
</span></span><span style="display:flex;"><span>    })<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">middleware</span>(<span style="color:#e6db74">&#39;admin.auth&#39;</span>);
</span></span></code></pre></div>
    </div>
    <a href="/posts/laravel%E4%BD%BF%E7%94%A8middleware/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/laravel%E4%BD%BF%E7%94%A8mail/" class="link black dim">
        laravel使用mail
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <h1 id="前言">前言</h1>
<h1 id="開發測試">開發測試</h1>
<p>laravel預設的網站https://mailtrap.io/inboxes#
將你的郵件訊息寄到一個「假的」郵箱，而你可以在一個真的郵件客戶端檢視它們。
找到頁籤和下拉選單<code>Demo inbox/smtp_settings/Integrations/laravel</code>
將資料填進.env</p>
<pre><code>MAIL_USERNAME=
MAIL_PASSWORD=
MAIL_ENCRYPTION=
</code></pre>
<h1 id="指令">指令</h1>
<p>下指令會在view底下建資料夾</p>
<pre><code>php artisan make:mail ContactFormMail --markdown=email.contact.contact-form
</code></pre>
<p>建完之後在要用的controller裡面</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#a6e22e">Mail</span><span style="color:#f92672">::</span><span style="color:#a6e22e">to</span>(<span style="color:#e6db74">&#39;test@test.com&#39;</span>)<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">send</span>(<span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ContactFormMail</span>($data));
</span></span></code></pre></div><p>在ContactFormMail裡面修改，這樣資料才傳的進view</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> $data;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">__construct</span>($data)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">data</span> <span style="color:#f92672">=</span> $data;
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div>
    </div>
    <a href="/posts/laravel%E4%BD%BF%E7%94%A8mail/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/laravel%E4%BD%BF%E7%94%A8model/" class="link black dim">
        laravel使用model
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <h1 id="前言">前言</h1>
<p>這篇重點在紀錄 model 使用時的幾個知識點
youtue 上有教學講得很清楚，這邊是看完教學的心得紀錄
參考自:https://youtu.be/L1E_uJxNC3M</p>
<p>laravel 框架中的 Model 操作数据库 , 相比 DB 类有什么明显的优越性吗?
<a href="https://www.zhihu.com/question/49649216">https://www.zhihu.com/question/49649216</a></p>
<h1 id="路由和-model-綁定">路由和 model 綁定</h1>
<p>Route Model Binding</p>
<p><code>/customers/{customer}</code>路由的參數只要和 founction 參數一樣的變數名稱</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>   <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">show</span>($customer)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//when the value is not found,this will return 404
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        $customer <span style="color:#f92672">=</span> <span style="color:#a6e22e">Customer</span><span style="color:#f92672">::</span><span style="color:#a6e22e">where</span>(<span style="color:#e6db74">&#39;id&#39;</span>,$customer)<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">firstOrFail</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">view</span>(<span style="color:#e6db74">&#39;customers.show&#39;</span>, <span style="color:#a6e22e">compact</span>(<span style="color:#e6db74">&#39;customer&#39;</span>));
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>就可以省略成這樣</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>   <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">show</span>(<span style="color:#a6e22e">Customer</span> $customer)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">view</span>(<span style="color:#e6db74">&#39;customers.show&#39;</span>, <span style="color:#a6e22e">compact</span>(<span style="color:#e6db74">&#39;customer&#39;</span>));
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h1 id="知識點">知識點</h1>
<h2 id="eloquent-scopes">Eloquent Scopes</h2>
<p>這個是用來客製化查詢結果的
例如在 model 裡</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">scopeActive</span>($query)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> $query<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">where</span>(<span style="color:#e6db74">&#39;active&#39;</span>, <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>controller 裡面就可以用<strong>靜態方法</strong>的方式調用</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>    <span style="color:#a6e22e">ModelName</span><span style="color:#f92672">::</span><span style="color:#a6e22e">Active</span>()<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">get</span>();
</span></span></code></pre></div><p>好處就是 sql 的查詢語句都放在 model 裡，controller 程式語意一目瞭然</p>
    </div>
    <a href="/posts/laravel%E4%BD%BF%E7%94%A8model/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
    </section>
    <ul class="pagination pagination-default">
      <li class="page-item">
        <a href="/posts/" aria-label="First" class="page-link" role="button"><span aria-hidden="true">&laquo;&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/posts/page/5/" aria-label="Previous" class="page-link" role="button"><span aria-hidden="true">&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/posts/page/4/" aria-label="Page 4" class="page-link" role="button">4</a>
      </li>
      <li class="page-item">
        <a href="/posts/page/5/" aria-label="Page 5" class="page-link" role="button">5</a>
      </li>
      <li class="page-item active">
        <a aria-current="page" aria-label="Page 6" class="page-link" role="button">6</a>
      </li>
      <li class="page-item">
        <a href="/posts/page/7/" aria-label="Page 7" class="page-link" role="button">7</a>
      </li>
      <li class="page-item">
        <a href="/posts/page/8/" aria-label="Page 8" class="page-link" role="button">8</a>
      </li>
      <li class="page-item">
        <a href="/posts/page/7/" aria-label="Next" class="page-link" role="button"><span aria-hidden="true">&raquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/posts/page/8/" aria-label="Last" class="page-link" role="button"><span aria-hidden="true">&raquo;&raquo;</span></a>
      </li>
    </ul></article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white white-70 dn dib-ns pv2 ph3 no-underline" href="http://localhost:1313/" >
    &copy;  My New Hugo Site 2025 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
