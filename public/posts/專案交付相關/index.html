<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>專案交付相關 | My New Hugo Site</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="專案環境解說

架構圖
各環境版本

語言
框架
資料庫相關套件
資料庫
快取技術
版控軟體


文件

api 文件
傳輸格式 json
協定 ws http
status code
error code
DB Schema 文件



DB Schema 文件
專案完成後，再由 DB Schema 轉成文件
Postgres SQL 用 SELECT 語法取得 Table Schema
大架構程式設計
參考：
大架構程式設計
Web 開發－資深工程師的經驗
q：當程式寫好之後，可以同時接受多少併發量？
a：用 jmeter 測試
a 測試完之後如何解決？
q： 1. 硬體擴充，但是會有硬體限制（實際上擴充的有限，例如一台電腦記憶體插槽就是那幾個） 2. 多台電腦達成服務（大架構的程式設計）
大架構程式設計

request : 由於 http 的特性，第一次請求和第二次請求，由不同機器處理是 ok 的
session : 不同機器如何共用 session
Application ：應用程式，不會變的資料每台機器都一樣

分流 Load Balance（負載平衝）設計
由一台 loading balance 的機器來和後端各 server 做溝通，用 cpu 或記憶體用量來判斷 server 是否忙碌，用簡單的網頁做回應看服務是否正常">
    <meta name="generator" content="Hugo 0.152.2">
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >




    


    
      

    

    

    
      <link rel="canonical" href="http://localhost:1313/posts/%E5%B0%88%E6%A1%88%E4%BA%A4%E4%BB%98%E7%9B%B8%E9%97%9C/">
    

    <meta property="og:url" content="http://localhost:1313/posts/%E5%B0%88%E6%A1%88%E4%BA%A4%E4%BB%98%E7%9B%B8%E9%97%9C/">
  <meta property="og:site_name" content="My New Hugo Site">
  <meta property="og:title" content="專案交付相關">
  <meta property="og:description" content="專案環境解說 架構圖 各環境版本 語言 框架 資料庫相關套件 資料庫 快取技術 版控軟體 文件 api 文件 傳輸格式 json 協定 ws http status code error code DB Schema 文件 DB Schema 文件 專案完成後，再由 DB Schema 轉成文件 Postgres SQL 用 SELECT 語法取得 Table Schema
大架構程式設計 參考： 大架構程式設計 Web 開發－資深工程師的經驗
q：當程式寫好之後，可以同時接受多少併發量？ a：用 jmeter 測試
a 測試完之後如何解決？ q： 1. 硬體擴充，但是會有硬體限制（實際上擴充的有限，例如一台電腦記憶體插槽就是那幾個） 2. 多台電腦達成服務（大架構的程式設計）
大架構程式設計
request : 由於 http 的特性，第一次請求和第二次請求，由不同機器處理是 ok 的 session : 不同機器如何共用 session Application ：應用程式，不會變的資料每台機器都一樣 分流 Load Balance（負載平衝）設計 由一台 loading balance 的機器來和後端各 server 做溝通，用 cpu 或記憶體用量來判斷 server 是否忙碌，用簡單的網頁做回應看服務是否正常">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2020-05-15T14:30:58+00:00">
    <meta property="article:modified_time" content="2020-05-15T14:30:58+00:00">

  <meta itemprop="name" content="專案交付相關">
  <meta itemprop="description" content="專案環境解說 架構圖 各環境版本 語言 框架 資料庫相關套件 資料庫 快取技術 版控軟體 文件 api 文件 傳輸格式 json 協定 ws http status code error code DB Schema 文件 DB Schema 文件 專案完成後，再由 DB Schema 轉成文件 Postgres SQL 用 SELECT 語法取得 Table Schema
大架構程式設計 參考： 大架構程式設計 Web 開發－資深工程師的經驗
q：當程式寫好之後，可以同時接受多少併發量？ a：用 jmeter 測試
a 測試完之後如何解決？ q： 1. 硬體擴充，但是會有硬體限制（實際上擴充的有限，例如一台電腦記憶體插槽就是那幾個） 2. 多台電腦達成服務（大架構的程式設計）
大架構程式設計
request : 由於 http 的特性，第一次請求和第二次請求，由不同機器處理是 ok 的 session : 不同機器如何共用 session Application ：應用程式，不會變的資料每台機器都一樣 分流 Load Balance（負載平衝）設計 由一台 loading balance 的機器來和後端各 server 做溝通，用 cpu 或記憶體用量來判斷 server 是否忙碌，用簡單的網頁做回應看服務是否正常">
  <meta itemprop="datePublished" content="2020-05-15T14:30:58+00:00">
  <meta itemprop="dateModified" content="2020-05-15T14:30:58+00:00">
  <meta itemprop="wordCount" content="169">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="專案交付相關">
  <meta name="twitter:description" content="專案環境解說 架構圖 各環境版本 語言 框架 資料庫相關套件 資料庫 快取技術 版控軟體 文件 api 文件 傳輸格式 json 協定 ws http status code error code DB Schema 文件 DB Schema 文件 專案完成後，再由 DB Schema 轉成文件 Postgres SQL 用 SELECT 語法取得 Table Schema
大架構程式設計 參考： 大架構程式設計 Web 開發－資深工程師的經驗
q：當程式寫好之後，可以同時接受多少併發量？ a：用 jmeter 測試
a 測試完之後如何解決？ q： 1. 硬體擴充，但是會有硬體限制（實際上擴充的有限，例如一台電腦記憶體插槽就是那幾個） 2. 多台電腦達成服務（大架構的程式設計）
大架構程式設計
request : 由於 http 的特性，第一次請求和第二次請求，由不同機器處理是 ok 的 session : 不同機器如何共用 session Application ：應用程式，不會變的資料每台機器都一樣 分流 Load Balance（負載平衝）設計 由一台 loading balance 的機器來和後端各 server 做溝通，用 cpu 或記憶體用量來判斷 server 是否忙碌，用簡單的網頁做回應看服務是否正常">

	
  </head><body class="ma0 avenir bg-near-white development">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l center items-center justify-between">
    <a href="/" class="f3 fw2 hover-white white-90 dib no-underline">
      
        My New Hugo Site
      
    </a>
    <div class="flex-l items-center">
      

      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  
  <article class="flex-l mw8 center ph3 flex-wrap justify-between">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside><div id="sharing" class="mt3 ananke-socials"></div>
<h1 class="f1 athelas mt3 mb1">專案交付相關</h1>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2020-05-15T14:30:58Z">May 15, 2020</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><h1 id="專案環境解說">專案環境解說</h1>
<ul>
<li>架構圖</li>
<li>各環境版本
<ul>
<li>語言</li>
<li>框架</li>
<li>資料庫相關套件</li>
<li>資料庫</li>
<li>快取技術</li>
<li>版控軟體</li>
</ul>
</li>
<li>文件
<ul>
<li>api 文件</li>
<li>傳輸格式 json</li>
<li>協定 ws http</li>
<li>status code</li>
<li>error code</li>
<li>DB Schema 文件</li>
</ul>
</li>
</ul>
<h2 id="db-schema-文件">DB Schema 文件</h2>
<p>專案完成後，再由 DB Schema 轉成文件
<a href="http://akuma1.pixnet.net/blog/post/358796858-postgres-sql-%e7%94%a8-select%e8%aa%9e%e6%b3%95%e5%8f%96%e5%be%97table-schema">Postgres SQL 用 SELECT 語法取得 Table Schema</a></p>
<h1 id="大架構程式設計">大架構程式設計</h1>
<p>參考：
<a href="http://akuma1.pixnet.net/blog/category/6529490">大架構程式設計</a>
<a href="https://docs.google.com/document/d/1qsIP6hX0OPkgNQiSxTIJCjvAJNOTi0XrkjbOJ4giJ0M/edit">Web 開發－資深工程師的經驗</a></p>
<p>q：當程式寫好之後，可以同時接受多少併發量？
a：用 jmeter 測試</p>
<p>a 測試完之後如何解決？
q： 1. 硬體擴充，但是會有硬體限制（實際上擴充的有限，例如一台電腦記憶體插槽就是那幾個） 2. 多台電腦達成服務（大架構的程式設計）</p>
<p>大架構程式設計</p>
<ul>
<li>request : 由於 http 的特性，第一次請求和第二次請求，由不同機器處理是 ok 的</li>
<li>session : 不同機器如何共用 session</li>
<li>Application ：應用程式，不會變的資料每台機器都一樣</li>
</ul>
<h2 id="分流-load-balance負載平衝設計">分流 Load Balance（負載平衝）設計</h2>
<p>由一台 loading balance 的機器來和後端各 server 做溝通，用 cpu 或記憶體用量來判斷 server 是否忙碌，用簡單的網頁做回應看服務是否正常</p>
<ul>
<li>persistence 所有請求導到固定的機器會遇到的情況
<ul>
<li>使用情境當分流的 server 已經都滿了，突然增加機器能否把人導到新的機器上？ 無法，因為 loading balance 的機器已經被固定導到這 5 台</li>
<li>假設其中一台掛掉，使用者被分流到其他機器上的 session 無法運作</li>
</ul>
</li>
<li>affinity 每次請求導到任意一台機器會遇到的情況
<ul>
<li>使用者被分流到其他機器上的 session 無法運作</li>
</ul>
</li>
</ul>
<h2 id="共用-session">共用 session</h2>
<p>為了解決上述共用的問題</p>
<ul>
<li>Cluster 叢集
將多台相同功能的機器，連在一起，webwever 會提供設定，設定完叢集就可以達成 session 共用</li>
<li>第三方軟體
例如：memcached , AWS dynamoDB</li>
<li>自行設計 session
存在資料庫，要知道銷毀的時機,配合語言的建立，更新，查詢</li>
</ul>
<h2 id="共用資料庫">共用資料庫</h2>
<ul>
<li>資料庫叢集
也需要一台負載平衡
由於同時寫入可能會讓資料庫出現問題
所以必須確保資料寫都在同 1 台，讀在另外幾台，不能有兩台個別寫的動作，會讓同步的邏輯變複雜，資料先後會有問題，所以由 loading balance 區分讀寫
<ul>
<li>loading balance 可以判斷 sql 語句，</li>
<li>或者是用連到 loading balance port 號，寫程式來做變更對應不同資料庫,loading balace 再去對應資料庫</li>
</ul>
</li>
<li>異地備援</li>
</ul>
<h2 id="自動彈性化-auto-scaling">自動彈性化 auto scaling</h2>
<p>一般來說主機如果是租的，是不會閒閒開個 5 台這那邊燒錢，一定是沒在用就關掉，需要時再開啟</p>
<ul>
<li>監看程式</li>
<li>映像檔
因為叢集架構會有 master 和 slaver，所以當一台虛擬機開啟服務時，就要自動化作設定，如果想避免這類的自動化設定，共用 session 可能就要用第三方軟體(redis 之類)，這樣就可以 vm 一開就正常服務</li>
</ul>
<h1 id="例外狀況">例外狀況</h1>
<p>流量跟預想的差太多，造成伺服器過度繁忙，甚至排擠到 Load Balance 來確認機器是否正常運行，造成明明機器是正常運行的，但是 Load Balance 判斷機器已掛點，所以 Auto Scaling 自動幫機器重啟，或是閉關此台機器，重新開啟一台新的機器來進行服務
因為它的流量是突然發生的，而不是緩緩上昇的，才會造成機器的誤判；所以，一般如果公司要舉辦活動，會預先評估或假設，預計有多少人連線進入、需要有多少台機器先開機等待之類的，一般會先行完成這些事情，來減低使用者在連線上造成的不愉快。</p>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white white-70 dn dib-ns pv2 ph3 no-underline" href="http://localhost:1313/" >
    &copy;  My New Hugo Site 2025 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
